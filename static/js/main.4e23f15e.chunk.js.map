{"version":3,"sources":["Header.tsx","Footer.tsx","Dialogs.tsx","utils.ts","ToolBar.tsx","InfoBoard.tsx","CircularProgressWithLabel.tsx","NetView.tsx","TimeSlider.tsx","EditGrid.js","Comments.tsx","NetPage.tsx","CodeBlock.tsx","DocPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Header","className","href","this","props","title","React","Component","Busuanzi","window","location","endsWith","id","Footer","EditOptionsDialog","state","open","content","setState","setTextArea","opt","getOpt","JSON","stringify","event","target","value","options","parse","setOpt","err","console","log","ta","document","getElementById","style","border","tip","innerHTML","color","fontSize","Tooltip","placement","onClick","handleClickOpen","Dialog","onClose","handleClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","rows","cols","onChange","e","textChanged","DialogActions","Button","handleClickConfirm","SearchDialog","queryText","q","queryAndFocus","key","handleClickSearch","InputBase","onKeyPress","handlePressEnter","placeholder","IconButton","type","FilterDialog","reverse","queryAndFilter","reset","handleClickFilter","checked","handleClickReset","Checkbox","handleChangeReverse","defaultOpt","oldOpt","atlas","Object","assign","physics","solver","forceAtlas2Based","entries","gravitationalConstant","centralGravity","springLength","springConstant","k","v","edges","font","size","GravitationalConstantSlider","useState","setValue","Typography","gutterBottom","Slider","newValue","min","max","valueLabelDisplay","SpringConstantSlider","Math","log10","newVal","step","valueLabelFormat","CustomSwitch","withStyles","switchBase","backgroundColor","track","Switch","PhysicsSwitch","enabled","name","HiddenEdgeLabelSwitch","TuneDialog","InforBoardSwitch","FormControlLabel","control","switchState","setSwitch","label","labelPlacement","HiddenUnselectedSwitch","SettingDialog","inforBoardSwitch","setInforBoardSwitch","hiddenUnselectedSwitch","setHiddenUnselectedSwitch","ImportDialog","sourceUrl","items","selected","length","loadSource","fetch","then","res","json","data","error","url","newInfo","info_a","info_b","new_","categories","nodes","concat","n","values","push","mergeInfo","info","setInfo","loadItem","sourceChanged","Autocomplete","onSelectedChange","getOptionLabel","item","renderInput","params","TextField","variant","buildFileSelector","fileSelector","createElement","setAttribute","addEventListener","file","files","reader","FileReader","onload","result","undefined","readAsText","UploadBtn","handleFileSelect","preventDefault","click","ToolBar","objectData","fileName","navigator","msSaveOrOpenBlob","blob","Blob","decodeURIComponent","encodeURI","a","download","encodeURIComponent","body","appendChild","removeChild","exportToJson","node","pos","cat","cats","categorie","boardStyle","top","y","left","x","catStyle","close","src","image","alt","str","limit","slice","shorterString","link","Box","position","display","CircularProgress","bottom","right","alignItems","justifyContent","component","round","getCanvas","getElementsByTagName","DefaultNetStyle","ViewControl","fullScreenMode","setFullScreenMode","oriHeight","turnBackSize","height","captureImg","exitFullscreen","canvas","fullRegion","requestFullscreen","clientHeight","screen","fullscreenElement","DEFAULT_NETWORK_OPTIONS","autoResize","shape","stabilization","width","inherit","interaction","hideEdgesOnDrag","hover","multiselect","NetView","infoBoard","loadingRatio","netRef","createRef","netOptions","oldNodes","on","oldState","resetNodes","hiddenNonSelected","node_id","current","network","getNodeAt","pointer","DOM","select_node","create_board","find","InfoBoard","board","handlePopup","handleHidden","setOptions","setNetOptions","registerLoading","createLoadindBar","ref","handleClick","map","catgories","borderWidth","createNode","arrows","from","to","createEdge","self","ratio","iterations","total","once","context","getContext","save","globalCompositeOperation","fillStyle","fillRect","restore","toDataURL","replace","query_type","query_text","split","trim","toggle","cond","pattern","RegExp","val","parseInt","test","String","queryNodes","selectNodes","nodes_id","fit","animation","focus","scale","setNodes","getSelectedNodes","closure","Set","nid","add","connected","getConnectedNodes","nid2","getSelectedClosure","has","createNetwork","bind","getNetOptions","queryNodesAndFocus","queryNodesAndFilter","useStyles","makeStyles","theme","createStyles","root","margin","spacing","timePoints","classes","i","marks","t","defaultValue","time","setTime","commandComponents","onExecute","textAlign","edit","delete","confirm","commit","cancel","Command","CommandButton","availableValues","direction","LookupEditCell","lookupEditCell","padding","dialog","inputRoot","selectMenu","availableColumnValues","onValueChange","TableCell","Select","MenuProps","input","Input","MenuItem","EditCell","column","Cell","getRowId","row","createGrid","colDef","getParentState","widthDef","colOrder","defaultDef","setParentState","columns","tableColumnExtensions","sorting","editingRowIds","addedRows","rowChanges","currentPage","pageSize","pageSizes","columnOrder","leftFixedColumns","TableEditColumn","COLUMN_TYPE","totalSummaryItems","defaultRow","keys","deletedIds","rowsForDelete","forEach","rowId","index","findIndex","splice","changedRows","added","changed","deleted","startingAddedId","deleteRows","nextProps","newRows","Paper","onSortingChange","s","onCurrentPageChange","c","onPageSizeChange","onEditingRowIdsChange","ids","onRowChangesChange","onAddedRowsChange","changeAddedRows","onCommitChanges","commitChanges","totalItems","columnExtensions","order","onOrderChange","showSortingControls","cellComponent","showAddCommand","showEditCommand","showDeleteCommand","commandComponent","leftColumns","NodeGrid","columnName","r","EdgeGrid","e_","setEdges","CatGrid","reprCats","setCats","recoverCats","Comments","script","anchor","issueTerm","Accordion","AccordionSummary","expandIcon","aria-controls","AccordionDetails","NetPage","isLoaded","timesInfo","currentTime","timepoints","Array","Promise","all","resp","infos","new_nodes","preProcessInfo","times","message","forceRender","setCategories","TimeSlider","setCurrentTime","CodeBlock","language","PureComponent","defaultProps","DocPage","text","source","renderers","code","escapeHtml","Card","titleImg","NewCard","Cards","Home","App","basename","exact","path","Boolean","hostname","match","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","catch"],"mappings":"gUAMqBA,G,qLAEjB,OACE,gCACE,yBAAKC,UAAU,cACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,UACb,yBAAKA,UAAU,SACb,uBAAGC,KAAK,gBAAR,4BAGA,uBAAGA,KAAK,WAAR,gBAGA,uBAAGA,KAAK,qCAAR,aAMN,yBAAKD,UAAU,mBACb,uBAAGA,UAAU,OACX,uBAAGC,KAAK,KAAR,WAIF,4BAAKC,KAAKC,MAAMC,c,GA1BQC,IAAMC,Y,oCCDpCC,EAAW,WAEf,OADeC,OAAOC,SAASR,KAAKS,SAAS,MAGzC,yBAAKV,UAAU,YACb,0BAAMW,GAAG,8BAAT,wCAA6C,0BAAMA,GAAG,2BAAtD,YAKF,sCAMeC,E,uKAEjB,OACE,yBAAKZ,UAAU,UACb,yBAAKA,UAAU,aACb,uBAAGC,KAAK,qCACN,kBAAC,IAAD,OAEF,uBAAGA,KAAK,6BACN,kBAAC,IAAD,CAAWU,GAAG,gBAGhB,kBAAC,EAAD,Y,GAZ0BN,IAAMC,W,yQCkBpCO,E,kDACJ,WAAYV,GAAgC,IAAD,8BACzC,cAAMA,IACDW,MAAQ,CACXC,MAAM,EACNC,QAAS,IAJ8B,E,8DASzCd,KAAKe,SAAS,CAACF,MAAM,IACrBb,KAAKgB,gB,oCAILhB,KAAKe,SAAS,CAACF,MAAM,M,oCAIrB,IAAII,EAAMjB,KAAKC,MAAMiB,SACjBJ,EAAUK,KAAKC,UAAUH,EAAK,KAAM,GACxCjB,KAAKe,SAAS,CAACD,QAASA,M,kCAGdO,GACVrB,KAAKe,SAAS,CACZD,QAASO,EAAMC,OAAOC,U,2CAKxB,IAAIC,EACJ,IACEA,EAAUL,KAAKM,MAAMzB,KAAKY,MAAME,SAChCd,KAAKC,MAAMyB,OAAOF,GAClBxB,KAAKe,SAAS,CAACF,MAAM,IACrB,MAAMc,GACNC,QAAQC,IAAIF,GACZ,IAAIG,EAAKC,SAASC,eAAe,wBACtB,OAAPF,IACFA,EAAGG,MAAMC,OAAS,qBAEpB,IAAIC,EAAMJ,SAASC,eAAe,qBAClCJ,QAAQC,IAAIM,GACA,OAARA,IACFA,EAAIC,UAAY,8DAChBD,EAAIF,MAAMI,MAAQ,UAClBF,EAAIF,MAAMK,SAAW,W,+BAKjB,IAAD,OACP,OACE,yBAAKxC,UAAU,qBACb,kBAACyC,EAAA,EAAD,CAASrC,MAAM,uCAASsC,UAAU,OAChC,kBAAC,IAAD,CAAUC,QAAS,WAAO,EAAKC,sBAEjC,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACC,EAAA,EAAD,CAAatC,GAAG,qBAAhB,oDACA,kBAACuC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,oKAEE,uBAAGlD,KAAK,qDAAR,4BAFF,WAIA,uBAAGU,GAAG,qBAAN,KACA,8BAAUA,GAAG,uBACXyC,KAAM,GAAIC,KAAM,GAChB5B,MAAOvB,KAAKY,MAAME,QAClBsC,SAAU,SAACC,GAAO,EAAKC,YAAYD,OAGvC,kBAACE,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQf,QAAS,WAAO,EAAKI,eAAgBR,MAAM,WAAnD,gBAGA,kBAACmB,EAAA,EAAD,CAAQf,QAAS,WAAO,EAAKgB,sBAAuBpB,MAAM,WAA1D,uB,GA5EoBlC,IAAMC,WA+FhCsD,E,kDACJ,WAAYzD,GAA2B,IAAD,8BACpC,cAAMA,IACDW,MAAQ,CACXC,MAAM,EACN8C,UAAW,IAJuB,E,8DASpC3D,KAAKe,SAAS,CAACF,MAAM,M,oCAIrBb,KAAKe,SAAS,CAACF,MAAM,M,0CAIrB,IAAM+C,EAAI5D,KAAKY,MAAM+C,UACrB3D,KAAKC,MAAM4D,cAAcD,GACzB5D,KAAKe,SAAS,CAACF,MAAM,EAAO8C,UAAW,O,kCAG7BtC,GACVrB,KAAKe,SAAS,CACZ4C,UAAWtC,EAAMC,OAAOC,U,uCAIXF,GACG,UAAdA,EAAMyC,KACR9D,KAAK+D,sB,+BAIC,IAAD,OACP,OACE,oCACE,kBAACxB,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAAC,IAAD,CAAYC,QAAS,kBAAM,EAAKC,sBAElC,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACE,EAAA,EAAD,CAAevC,GAAG,gBAChB,kBAACuD,EAAA,EAAD,CACEzC,MAAOvB,KAAKY,MAAM+C,UAClBP,SAAU,SAACC,GAAD,OAAO,EAAKC,YAAYD,IAClCY,WAAY,SAACZ,GAAD,OAAO,EAAKa,iBAAiBb,IACzCc,YAAY,mIAEd,kBAACC,EAAA,EAAD,CAAYC,KAAK,SAAS5B,QAAS,kBAAM,EAAKsB,sBAC5C,kBAAC,IAAD,c,GAlDa5D,IAAMC,WAsE3BkE,G,kDACJ,WAAYrE,GAA2B,IAAD,8BACpC,cAAMA,IACDW,MAAQ,CACXC,MAAM,EACN8C,UAAW,GACXY,SAAS,GALyB,E,8DAUpCvE,KAAKe,SAAS,CAACF,MAAM,M,oCAIrBb,KAAKe,SAAS,CAACF,MAAM,M,0CAIrB,IAAM+C,EAAI5D,KAAKY,MAAM+C,UACrB3D,KAAKC,MAAMuE,eAAeZ,EAAG5D,KAAKY,MAAM2D,SACxCvE,KAAKe,SAAS,CAACF,MAAM,EAAO8C,UAAW,O,yCAIrC3D,KAAKC,MAAMwE,QACXzE,KAAKe,SAAS,CAACF,MAAM,EAAO8C,UAAW,O,kCAG/BtC,GACVrB,KAAKe,SAAS,CACZ4C,UAAWtC,EAAMC,OAAOC,U,uCAIXF,GACG,UAAdA,EAAMyC,KACR9D,KAAK0E,sB,0CAIWrD,GAClBrB,KAAKe,SAAS,CACZwD,QAASlD,EAAMC,OAAOqD,Y,+BAIhB,IAAD,OACP,OACE,oCACE,kBAACpC,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAAC,IAAD,CAAgBC,QAAS,kBAAM,EAAKC,sBAEtC,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACE,EAAA,EAAD,CAAevC,GAAG,gBAChB,kBAACuD,EAAA,EAAD,CACEzC,MAAOvB,KAAKY,MAAM+C,UAClBP,SAAU,SAACC,GAAD,OAAO,EAAKC,YAAYD,IAClCY,WAAY,SAACZ,GAAD,OAAO,EAAKa,iBAAiBb,IACzCc,YAAY,2HAEd,kBAACC,EAAA,EAAD,CAAYC,KAAK,SAAS5B,QAAS,kBAAM,EAAKiC,sBAC5C,kBAACnC,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAAC,IAAD,QAGJ,kBAAC4B,EAAA,EAAD,CAAYC,KAAK,SAAS5B,QAAS,kBAAM,EAAKmC,qBAC5C,kBAACrC,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAAC,IAAD,QAGJ,kBAACD,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAACqC,EAAA,EAAD,CAAUF,QAAS3E,KAAKY,MAAM2D,QAASnB,SAAU,SAACC,GAAD,OAAO,EAAKyB,oBAAoBzB,c,GAxEpElD,IAAMC,WAkF3B2E,GAAa,SAACC,GAClB,IAGIC,EAHEhE,EAAMiE,OAAOC,OAAO,GAAIH,GACxB,YAAa/D,IAAQA,EAAImE,QAAU,IACzCnE,EAAImE,QAAQC,OAAS,mBAEf,qBAAsBpE,EAAImE,QAI9BH,EAAQhE,EAAImE,QAAQE,kBAHpBL,EAAQ,GACRhE,EAAImE,QAAQE,iBAAmBL,GAUjC,IANA,IAMA,MAAqBC,OAAOK,QANX,CACfC,uBAAwB,GACxBC,eAAgB,KAChBC,aAAc,IACdC,eAAgB,MAElB,eAA+C,CAAC,IAAD,sBAAnCC,EAAmC,KAAhCC,EAAgC,KACvCD,KAAKX,IACTA,EAAMW,GAAKC,GAMf,MAHM,UAAW5E,IAAQA,EAAI6E,MAAQ,IAC/B,SAAU7E,EAAI6E,QAAU7E,EAAI6E,MAAMC,KAAO,IACzC,SAAU9E,EAAI6E,MAAMC,OAAS9E,EAAI6E,MAAMC,KAAKC,KAAO,IAClD/E,GASHgF,GAA8B,SAAChG,GACnC,IAAMgB,EAAM8D,GAAW9E,EAAMiB,UACzB+D,EAAQhE,EAAImE,QAAQE,iBAFkC,EAGhCY,mBAASjB,EAAMO,uBAHiB,mBAGnDjE,EAHmD,KAG5C4E,EAH4C,KAW1D,OACE,oCACE,kBAACC,EAAA,EAAD,CAAYC,cAAY,GAAxB,4BAGA,kBAACC,EAAA,EAAD,CACE/E,MAAOA,EACP6B,SAbe,SAAC/B,EAAYkF,GAChCtB,EAAMO,sBAAwBe,EAC9BJ,EAASI,GACTtG,EAAMyB,OAAOT,IAWTuF,KAAM,IACNC,IAAK,EACLC,kBAAkB,OAClB5D,kBAAgB,wBAMlB6D,GAAuB,SAAC1G,GAC5B,IAAMgB,EAAM8D,GAAW9E,EAAMiB,UACzB+D,EAAQhE,EAAImE,QAAQE,iBAF2B,EAGzBY,mBAASU,KAAKC,MAAM5B,EAAMU,iBAHD,mBAG5CpE,EAH4C,KAGrC4E,EAHqC,KAgBnD,OACE,oCACE,kBAACC,EAAA,EAAD,CAAYC,cAAY,GAAxB,4BAGA,kBAACC,EAAA,EAAD,CACE/E,MAAOA,EACP6B,SAlBe,SAAC/B,EAAYkF,GAChC,IAAMO,EAAM,SAAG,GAAKP,GACpBtB,EAAMU,eAAiBmB,EACvBX,EAASI,GACTtG,EAAMyB,OAAOT,IAeT8F,KAAM,GACNP,KAAM,EACNC,IAAK,EACLC,kBAAkB,OAClBM,iBAhBc,SAACzF,GACnB,MAAO,MAAQA,GAgBXuB,kBAAgB,wBAMlBmE,GAAeC,YAAW,CAC9BC,WAAY,CACV9E,MAAO,UACP,YAAa,CACXA,MAAO,WAET,qBAAsB,CACpB+E,gBAAiB,YAGrBzC,QAAS,GACT0C,MAAO,IAXYH,CAYlBI,KAGGC,GAAgB,SAACtH,GACrB,IAAMgB,EAAM8D,GAAW9E,EAAMiB,UADe,EAElBgF,mBAASjF,EAAImE,QAAQoC,SAFH,mBAErCjG,EAFqC,KAE9B4E,EAF8B,KAW5C,OACE,oCACE,kBAACC,EAAA,EAAD,CAAYC,cAAY,GAAxB,4BAGA,kBAACY,GAAD,CAActC,QAASpD,EAAO6B,SAZb,SAAC/B,GACpB,IAAMsD,EAAUtD,EAAMC,OAAOqD,QAC7B1D,EAAImE,QAAQoC,QAAU7C,EACtBwB,EAASxB,GACT1E,EAAMyB,OAAOT,IAQ2CwG,KAAK,mBAO3DC,GAAwB,SAACzH,GAC7B,IAAMgB,EAAM8D,GAAW9E,EAAMiB,UADuB,EAE1BgF,mBAAiC,IAAxBjF,EAAI6E,MAAMC,KAAKC,MAFE,mBAE7CzE,EAF6C,KAEtC4E,EAFsC,KAgBpD,OACE,oCACE,kBAACC,EAAA,EAAD,CAAYC,cAAY,GAAxB,kCAGA,kBAACY,GAAD,CAActC,QAASpD,EAAO6B,SAjBb,SAAC/B,GACpB,IAAMsD,EAAUtD,EAAMC,OAAOqD,QAE3B1D,EAAI6E,MAAMC,KAAKC,KADbrB,EACoB,EAEA,GAExBwB,EAASxB,GACT1E,EAAMyB,OAAOT,GACbW,QAAQC,IAAIZ,IAQ4CwG,KAAK,2BAe3DE,G,kDACJ,WAAY1H,GAAyB,IAAD,8BAClC,cAAMA,IACDW,MAAQ,CACXC,MAAM,GAH0B,E,8DAQlCb,KAAKe,SAAS,CAACF,MAAM,M,oCAIrBb,KAAKe,SAAS,CAACF,MAAM,M,+BAGb,IAAD,OACP,OACE,oCACE,kBAAC0B,EAAA,EAAD,CAASrC,MAAM,2BAAOsC,UAAU,OAC9B,kBAAC,IAAD,CAAUC,QAAS,kBAAM,EAAKC,sBAEhC,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACC,EAAA,EAAD,CAAatC,GAAG,qBAAhB,wCACA,kBAACuC,EAAA,EAAD,CAAevC,GAAG,cAChB,kBAAC,GAAD,CACEiB,OAAQ1B,KAAKC,MAAMyB,OACnBR,OAAQlB,KAAKC,MAAMiB,SACrB,kBAAC,GAAD,CACEQ,OAAQ1B,KAAKC,MAAMyB,OACnBR,OAAQlB,KAAKC,MAAMiB,SACrB,kBAAC,GAAD,CACEQ,OAAQ1B,KAAKC,MAAMyB,OACnBR,OAAQlB,KAAKC,MAAMiB,SACrB,kBAAC,GAAD,CACEQ,OAAQ1B,KAAKC,MAAMyB,OACnBR,OAAQlB,KAAKC,MAAMiB,gB,GApCRf,IAAMC,WA6CzBwH,GAAmB,SAAC3H,GAMxB,OACE,kBAAC4H,EAAA,EAAD,CACEC,QAAS,kBAACb,GAAD,CAActC,QAAS1E,EAAM8H,YAAa3E,SAPlC,SAAC/B,GACpB,IAAMsD,EAAUtD,EAAMC,OAAOqD,QAC7B1E,EAAM+H,UAAUrD,IAK6D8C,KAAK,oBAChFQ,MAAM,2BACNC,eAAe,WAOfC,GAAyB,SAAClI,GAM9B,OACE,kBAAC4H,EAAA,EAAD,CACEC,QAAS,kBAACb,GAAD,CAActC,QAAS1E,EAAM8H,YAAa3E,SAPlC,SAAC/B,GACpB,IAAMsD,EAAUtD,EAAMC,OAAOqD,QAC7B1E,EAAM+H,UAAUrD,IAK6D8C,KAAK,0BAChFQ,MAAM,6CACNC,eAAe,WAiBfE,G,kDACJ,WAAYnI,GAA4B,IAAD,8BACrC,cAAMA,IACDW,MAAQ,CACXC,MAAM,GAH6B,E,8DAQrCb,KAAKe,SAAS,CAACF,MAAM,M,oCAIrBb,KAAKe,SAAS,CAACF,MAAM,M,+BAGb,IAAD,OACP,OACE,oCACE,kBAAC0B,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAC5B,kBAAC,IAAD,CAAcC,QAAS,kBAAM,EAAKC,sBAEpC,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACC,EAAA,EAAD,CAAatC,GAAG,qBAAhB,gBACA,kBAACuC,EAAA,EAAD,CAAevC,GAAG,cAChB,kBAAC,GAAD,CACEsH,YAAa/H,KAAKC,MAAMoI,iBACxBL,UAAWhI,KAAKC,MAAMqI,sBAExB,kBAAC,GAAD,CACEP,YAAa/H,KAAKC,MAAMsI,uBACxBP,UAAWhI,KAAKC,MAAMuI,mC,GA/BRrI,IAAMC,WAsD5BqI,G,kDAEJ,WAAYxI,GAA2B,IAAD,8BACpC,cAAMA,IACDW,MAAQ,CACXC,MAAM,EACN6H,UAAW,gFACXC,MAAO,GACPC,SAAU,MANwB,E,8DAWpC5I,KAAKe,SAAS,CAACF,MAAM,IACW,IAA5Bb,KAAKY,MAAM+H,MAAME,QACnB7I,KAAK8I,e,oCAKP9I,KAAKe,SAAS,CAACF,MAAM,M,oCAGTQ,GACZrB,KAAKe,SAAS,CACZ2H,UAAWrH,EAAMC,OAAOC,QAE1BvB,KAAK8I,e,mCAGO,IAAD,OACXC,MAAM/I,KAAKY,MAAM8H,WACdM,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GACJ,EAAKpI,SAAS,CACZ4H,MAAOQ,EAAKA,UAGhB,SAACC,GACCxH,QAAQC,IAAIuH,GACZ,EAAKrI,SAAS,CACZ4H,MAAO,U,uCAKEtH,EAAYkF,GAC3BvG,KAAKe,SAAS,CACZ6H,SAAUrC,M,iCAIF,IAAD,OACT,GAA4B,OAAxBvG,KAAKY,MAAMgI,SAAf,CACA,IAAMS,EAAMrJ,KAAKY,MAAMgI,SAASO,KAChCJ,MAAMM,GACHL,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAG,GACJ,IAAMG,ECtnBI,SAACC,EAAkBC,GAEnC,IADA,IAAIC,EAAOvE,OAAOC,OAAO,GAAIoE,GAC7B,MAAqBrE,OAAOK,QAAQiE,EAAOE,YAA3C,eAAwD,CAAC,IAAD,sBAA5C9D,EAA4C,KAAzCC,EAAyC,KACtD4D,EAAKC,WAAW9D,GAAKC,EAEvB,IALwD,EAKpD8D,EAAkC,GALkB,cAMxCJ,EAAOJ,KAAKQ,MAAMC,OAAOJ,EAAOL,KAAKQ,QANG,IAMxD,2BAA6D,CAAC,IAAnDE,EAAkD,QAC3DF,EAAME,EAAEpJ,IAAMoJ,GAPwC,8BASxD,IATwD,EASpD/D,EAAkC,GATkB,cAUxCyD,EAAOJ,KAAKrD,MAAM8D,OAAOJ,EAAOL,KAAKrD,QAVG,IAUxD,2BAA6D,CAAC,IAAnDzC,EAAkD,QAC3DyC,EAAMzC,EAAE5C,IAAM4C,GAXwC,8BAaxDoG,EAAKN,KAAKQ,MAAQ,GAClB,cAAgBzE,OAAO4E,OAAOH,GAA9B,eAAsC,CAAjC,IAAME,EAAC,KAA2BJ,EAAKN,KAAKQ,MAAMI,KAAKF,GAC5DJ,EAAKN,KAAKrD,MAAQ,GAClB,cAAgBZ,OAAO4E,OAAOhE,GAA9B,eAAsC,CAAjC,IAAMzC,EAAC,KAA2BoG,EAAKN,KAAKrD,MAAMiE,KAAK1G,GAC5D,OAAOoG,EDqmBeO,CAAU,EAAK/J,MAAMgK,KAAMd,GAC3C,EAAKlJ,MAAMiK,QAAQZ,MAErB,SAACF,GACCxH,QAAQC,IAAIuH,MAEhBpJ,KAAK6C,iB,2CAIL7C,KAAKmK,a,+BAGG,IAAD,SACP,OACE,oCACE,4BAAQ1H,QAAS,kBAAM,EAAKC,oBAA5B,8CACA,kBAACC,EAAA,EAAD,CAAQ9B,KAAMb,KAAKY,MAAMC,KAAM+B,QAAS,WAAO,EAAKC,eAAgBC,kBAAgB,qBAClF,kBAACC,EAAA,EAAD,CAAatC,GAAG,qBAAhB,wCAEA,kBAACuC,EAAA,EAAD,CAAevC,GAAG,gBAChB,kBAAC2F,EAAA,EAAD,CAAYC,cAAY,GAAxB,gCACOrG,KAAKY,MAAMgI,gBADlB,aACO,EAAqBnB,MAE5B,kBAACzD,EAAA,EAAD,CACEzC,MAAOvB,KAAKY,MAAM8H,UAClBtF,SAAU,SAACC,GAAD,OAAO,EAAK+G,cAAc/G,IACpCc,YAAY,qEAEd,kBAACiC,EAAA,EAAD,CAAYC,cAAY,GAAxB,gBAGA,kBAACgE,EAAA,EAAD,CACE9I,MAAOvB,KAAKY,MAAMgI,SAClBxF,SAAU,SAACC,EAAGwG,GAAO,EAAKS,iBAAiBjH,EAAGwG,IAC9CpJ,GAAG,sBACHe,QAASxB,KAAKY,MAAM+H,MACpB4B,eAAgB,SAACC,GAAD,OAAsBA,EAAK/C,MAC3CgD,YAAa,SAACC,GAAD,OAAiB,kBAACC,EAAA,EAAD,iBAAeD,EAAf,CAAuBzC,MAAM,eAAK2C,QAAQ,iBAG1E,kBAACrH,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAQf,QAAS,WAAO,EAAKI,eAAgBR,MAAM,WAAnD,gBAGA,kBAACmB,EAAA,EAAD,CAAQf,QAAS,WAAO,EAAKgB,sBAAuBpB,MAAM,WAA1D,wB,GAvGalC,IAAMC,WEhlB3ByK,GAAoB,SAACX,GACzB,IAAMY,EAAe/I,SAASgJ,cAAc,SAe5C,OAdAD,EAAaE,aAAa,OAAQ,QAClCF,EAAaE,aAAa,WAAY,YACtCF,EAAaE,aAAa,SAAU,SACpCF,EAAaG,iBAAiB,UAAU,SAAC5J,GACvC,IACI6J,EADW7J,EAAMC,OACI6J,MAAmB,GACxCC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,WACdpB,EAAQ/I,KAAKM,MAAM2J,EAAOG,eAEfC,IAATN,GACFE,EAAOK,WAAWP,MAGfJ,GAWHY,G,4MAOJC,iBAAmB,SAACtI,GAClBA,EAAEuI,iBACF,EAAKhL,MAAMkK,aAAae,S,kEAPxB7L,KAAKe,SAAS,CACZ+J,aAAcD,GAAkB7K,KAAKC,MAAMiK,a,+BAU7C,OAAO,4BAAQzH,QAASzC,KAAK2L,kBAAtB,uC,GAbaxL,IAAMC,WAuBT0L,G,uKACT,IAAD,OACP,OACE,yBAAKhM,UAAU,WACb,yBAAKA,UAAU,aACb,kBAAC,GAAD,CAAcmK,KAAMjK,KAAKC,MAAMgK,KAAMC,QAASlK,KAAKC,MAAMiK,UACzD,kBAAC,GAAD,CAAWA,QAASlK,KAAKC,MAAMiK,UAC/B,4BAAQzH,QAAS,YD/DN,SAACsJ,EAAiBC,GAErC,GAAI1L,OAAO2L,WAAa3L,OAAO2L,UAAUC,iBAAkB,CACzD,IAAIC,EAAO,IAAIC,KAAK,CAACC,mBAAmBC,UAAUnL,KAAKC,UAAU2K,MAAgB,CAAE1H,KAFnE,oCAGhB4H,UAAUC,iBAAiBC,EAAMH,OAC5B,CACL,IAAIO,EAAIxK,SAASgJ,cAAc,KAC/BwB,EAAEC,SAAWR,EACbO,EAAExM,KAAO,wCAA8B0M,mBAAmBtL,KAAKC,UAAU2K,EAAY,KAAM,IAC3FQ,EAAEjL,OAAS,SACXS,SAAS2K,KAAKC,YAAYJ,GAC1BA,EAAEV,QACF9J,SAAS2K,KAAKE,YAAYL,ICmDIM,CAAa,EAAK5M,MAAMgK,KAAM,iBAAtD,yC,GAP2B9J,IAAMC,W,mHC3C5B,YAACH,GACd,IAAM6M,EAAO7M,EAAM6M,KACbC,EAAM9M,EAAM8M,IACdC,EAAM/M,EAAMgN,KAAKH,EAAKI,WACpBC,EAAa,CACjBC,IAAKL,EAAIM,EAAI,KACbC,KAAMP,EAAIQ,EAAI,MAEVC,EAAW,UAAWR,EAAM,CAAC3K,MAAO2K,EAAI3K,OAAS,GACvD,OACE,kBAAC,KAAD,KACE,yBAAKvC,UAAU,YAAYmC,MAAOkL,GAChC,kBAAC,KAAD,CAAWrN,UAAU,cAAc2C,QAAS,kBAAMxC,EAAMwN,WACxD,yBAAK3N,UAAU,WACb,yBAAK4N,IAAM,UAAWZ,EAAQA,EAAKa,MAAQ,GAAIC,IAAI,KACnD,yBAAK9N,UAAU,SACb,yBAAKA,UAAU,QACZgN,EAAK7E,OAER,yBAAKnI,UAAU,YAAYmC,MAAOuL,QACtBhC,IAARwB,EAAqBA,EAAI/E,MAAQ,KAGvC,yBAAKnI,UAAU,YFnBH,SAAC+N,EAAaC,GAClC,IAAI7E,EAAM,GAAK4E,EAKf,OAJIA,EAAIhF,OAASiF,IACf7E,EAAM4E,EAAIE,MAAM,EAAGD,GACnB7E,GAAO,OAEFA,EEcK+E,CAAclB,EAAK7C,KAAM,KAG1B,SAAU6C,GAA2B,KAAjBA,EAAI,KACzB,uBAAGhN,UAAU,OAAOC,KAAM+M,EAAKmB,MAA/B,gBACA,S,oBCnCG,YAAChO,GACd,OAAIA,EAAMsB,OAAS,IACT,qCAGR,kBAAC2M,GAAA,EAAD,CAAKC,SAAS,WAAWC,QAAQ,eAC/B,kBAACC,GAAA,EAAqBpO,GACtB,kBAACiO,GAAA,EAAD,CACEd,IAAK,EACLE,KAAM,EACNgB,OAAQ,EACRC,MAAO,EACPJ,SAAS,WACTC,QAAQ,OACRI,WAAW,SACXC,eAAe,UAEf,kBAACrI,EAAA,EAAD,CAAYwE,QAAQ,UAAU8D,UAAU,MAAMrM,MAAM,iBAApD,UACMuE,KAAK+H,MAAO1O,EAAMsB,OADxB,SCXFqN,GAAY,kBAAM7M,SAAS8M,qBAAqB,UAAU,IAG1DC,GACO,UADPA,GAEa,EA+CbC,GAAc,SAAC9O,GAA6B,IAAD,EACHiG,oBAAS,GADN,mBACxC8I,EADwC,KACxBC,EADwB,KAE3CC,EAAY,IAiBVC,EAAe,WACNP,KACN3M,MAAMmN,OAASF,EAAY,MASpC,OACE,yBAAKpP,UAAU,eACb,kBAAC,EAAD,CAAc+D,cAAe5D,EAAM4D,gBACnC,kBAAC,GAAD,CAAcW,eAAgBvE,EAAMuE,eAAgBC,MAAOxE,EAAMwE,QACjE,kBAAClC,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAAM,kBAAC,KAAD,CAAiBC,QAAS,kBAAMxC,EAAMoP,iBAC1E,kBAAC,GAAD,CAAY3N,OAAQzB,EAAMyB,OAAQR,OAAQjB,EAAMiB,SAChD,kBAAC,EAAD,CAAmBQ,OAAQzB,EAAMyB,OAAQR,OAAQjB,EAAMiB,SACvD,kBAAC,GAAD,CACEmH,iBAAkBpI,EAAMoI,iBACxBC,oBAAqBrI,EAAMqI,oBAC3BC,uBAAwBtI,EAAMsI,uBAC9BC,0BAA2BvI,EAAMuI,4BAElCwG,EACC,kBAACzM,EAAA,EAAD,CAASrC,MAAM,2BAAOsC,UAAU,OAAM,kBAAC,KAAD,CAAoBC,QApBzC,WACrBV,SAASuN,iBACTH,IACAF,GAAkB,OAkBd,kBAAC1M,EAAA,EAAD,CAASrC,MAAM,eAAKsC,UAAU,OAAM,kBAAC,KAAD,CAAgBC,QAzClC,WACtB,IAAI8M,EAASX,KACTY,EAAazN,SAASC,eAAe,sBAC/B,OAAVwN,QAAU,IAAVA,KAAYC,oBACZP,EAAYK,EAAOG,aACnBH,EAAOtN,MAAMmN,OAAS9O,OAAOqP,OAAOP,OAAS,KAC7CH,GAAkB,GAClBlN,SAASkJ,iBAAiB,oBAAoB,SAAC5J,GACvCU,SAAS6N,oBACbT,IACAF,GAAkB,aAqCpBY,GAA0B,CAC9BC,YAAY,EACZnG,MAAO,CACLoG,MAAO,OAET3K,QAAS,CACPoC,SAAS,EACTwI,eAAe,EACf3K,OAAQ,mBACRC,iBAAkB,CAChBE,uBAAwB,GACxBC,eAAgB,KAChBC,aAAc,IACdC,eAAgB,MAGpBG,MAAO,CACLmK,MAAO,GACP5N,MAAO,CACL6N,QAAS,OAGbC,YAAa,CACXC,iBAAiB,EACjBC,OAAO,EACPC,aAAa,IAuBIC,G,kDACnB,WAAYtQ,GAAsB,IAAD,8BAC/B,cAAMA,IACDW,MAAQ,CACX4P,UAAW,KACXC,aAAc,EACdpI,kBAAkB,EAClBqI,OAAQvQ,IAAMwQ,YACdC,WAAY,KACZC,SAAU5Q,EAAMgK,KAAKd,KAAKQ,MAC1BpB,wBAAwB,GATK,E,sEAaPuI,GACxB,IAAMC,EAAW/Q,KAAKY,MAAM2H,wBACV,IAAbwI,IAA8B,IAAPD,EAC1B9Q,KAAKgR,cACiB,IAAbD,IAA+B,IAAPD,GACjC9Q,KAAKiR,oBAEPjR,KAAKe,SAAS,CACZwH,uBAAwBuI,M,kCAIfpG,GAAc,IAAD,OAElBwG,EADWlR,KAAKY,MAAM8P,OAAOS,QAAuBC,QAClCC,UAAU3G,EAAO4G,QAAQC,KAC3CC,EAAkC,qBAAZN,EAC5BtP,QAAQC,IAAIqP,GACZ,IAAMnE,EAAa,CAACQ,EAAG,GAAIF,EAAG,IAExBoE,EAAe,WACnB,IAAI3E,EAAO,EAAK7M,MAAMgK,KAAKd,KAAKQ,MAAM+H,MAAK,SAAC7H,GAAD,OAAQA,EAAEpJ,KAAOyQ,KAC5D,OAAO,kBAACS,GAAD,CAAW5E,IAAKA,EAAKD,KAAMA,EAChBG,KAAM,EAAKhN,MAAMgK,KAAKP,WACtB+D,MAAO,kBAAO,EAAK1M,SAAS,CAACyP,UAAW,WAGxDoB,EAAQ5R,KAAKY,MAAM4P,UACnBgB,GAA0B,OAAVI,GAAmB5R,KAAKY,MAAMyH,kBAEvCmJ,GAA0B,OAAVI,GAAmB5R,KAAKY,MAAMyH,iBADvDrI,KAAKe,SAAS,CAACyP,UAAWiB,MAGP,OAAVG,GACT5R,KAAKe,SAAS,CAACyP,UAAW,S,mCAIjB9F,GACL1K,KAAKY,MAAM2H,yBACImC,EAAOf,MAAMd,OAAS,EAEzC7I,KAAKiR,oBAELjR,KAAKgR,gB,kCAIGtG,GACV1K,KAAK6R,YAAYnH,GACjB1K,KAAK8R,aAAapH,K,0CAGAoG,GAClB9Q,KAAKe,SAAS,CACZsH,iBAAkByI,M,oCAIRtP,GACGxB,KAAKY,MAAM8P,OAAOS,QAAuBC,QAChDW,WAAWvQ,GACnBxB,KAAKe,SAAS,CAAC6P,WAAYpP,M,sCAI3B,OAAOxB,KAAKY,MAAMgQ,a,0CAIlB5Q,KAAKgS,cAAcnC,IACnB7P,KAAKiS,oB,sCAGU,IAAD,OACVhI,EAAOjK,KAAKC,MAAMgK,KAUtB,OARE,oCACCjK,KAAKkS,mBACN,kBAAC,WAAD,CAASC,IAAKnS,KAAKY,MAAM8P,OAAQjO,QAAS,SAACiI,GAAiB,EAAK0H,YAAY1H,KAC1ET,EAAKd,KAAKQ,MAAM0I,KAAI,SAAAxI,GAAC,OA1OX,SAACA,EAAayI,GAC/B,IACIjQ,EADA2K,EAAMsF,EAAUzI,EAAEqD,WAOtB,OAJE7K,EADE2K,EACMA,EAAI3K,MAEJyM,GAGR,kBAAC,QAAD,CAAMhL,IAAK+F,EAAEpJ,GACXA,GAAIoJ,EAAEpJ,GAAIwH,MAAO4B,EAAE5B,MACnB8H,MAAM,gBACNpC,MAAO9D,EAAE8D,MACTtL,MAAOA,EACPkQ,YAAazD,KA4Ne0D,CAAW3I,EAAGI,EAAKP,eAC5CO,EAAKd,KAAKrD,MAAMuM,KAAI,SAAChP,GAAD,OAxNV,SAACA,GAClB,IAAIoP,EAAS,GAEb,MADK,cAAepP,IAA0B,IAAnBA,EAAC,YAA2BoP,EAAS,MAE9D,kBAAC,QAAD,CAAM3O,IAAKT,EAAE5C,GAAIA,GAAI4C,EAAE5C,GAAIgS,OAAQA,EAC7BC,KAAMrP,EAAEqP,KAAMC,GAAItP,EAAEsP,GAAI1K,MAAO5E,EAAE4E,QAmNP2K,CAAWvP,U,yCAQ3C,OACE,yBAAK5C,GAAG,eACN,kBAAC,GAAD,CAAkBmK,QAAQ,cAAcrJ,MAAiC,IAA1BvB,KAAKY,MAAM6P,kB,wCAO9D,IAAMoC,EAAO7S,KACPmS,EAAOnS,KAAKY,MAAM8P,OAAOS,QAAuBC,QACtDe,EAAIrB,GAAG,yBAAyB,SAAUpG,GACxC,IAAMoI,EAAQpI,EAAOqI,WAAarI,EAAOsI,MACzCH,EAAK9R,SAAS,CAAC0P,aAAcqC,OAE/BX,EAAIc,KAAK,+BAA+B,WACtCJ,EAAK9R,SAAS,CAAC0P,aAAc,S,mCAK/B,IAAMlB,EAASX,KAGTsE,EAAU3D,EAAO4D,WAAW,MAClB,OAAZD,IACFA,EAAQE,OACRF,EAAQG,yBAA2B,mBACnCH,EAAQI,UAAY,UACpBJ,EAAQK,SAAS,EAAG,EAAGhE,EAAOU,MAAOV,EAAOH,QAC5C8D,EAAQM,WAGV,IACMnK,EADMkG,EAAOkE,UAAU,YAAa,GAC1BC,QAAQ,oBAAqB,iCACzCnH,EAAIxK,SAASgJ,cAAc,KAC/BwB,EAAEC,SAAW,cACbD,EAAExM,KAAOsJ,EACTkD,EAAEjL,OAAS,SACXS,SAAS2K,KAAKC,YAAYJ,GAC1BA,EAAEV,QACF9J,SAAS2K,KAAKE,YAAYL,K,iCAGjB3I,GAAoC,IAA1BW,EAAyB,wDACxCoP,EAAa,QACbC,EAAa,GACXjL,EAAQ/E,EAAEiQ,MAAM,KACtB,GAAqB,IAAjBlL,EAAME,OACR+K,EAAajL,EAAM,OACd,IAAqB,IAAjBA,EAAME,OAIf,MAAO,GAHP8K,EAAahL,EAAM,GACnBiL,EAAajL,EAAM,GAAGmL,OAIxB,IAAI7K,EAAM,GACJU,EAAQ3J,KAAKC,MAAMgK,KAAKd,KAAKQ,MAC7BoK,EAAS,SAACC,GAAD,OAAmBzP,GAAYyP,EAAQA,GACtD,IACE,IADE,EACIC,EAAU,IAAIC,OAAON,GADzB,cAEYjK,GAFZ,IAEF,2BAAqB,CAAC,IAAbE,EAAY,QACnB,GAAM8J,KAAc9J,EAApB,CACA,IAAMsK,EAAOtK,EAAU8J,GACJ,OAAfA,EACEI,EAAOI,IAAQC,SAASR,KAC1B3K,EAAIc,KAAKF,GAGPkK,EAAOE,EAAQI,KAAKC,OAAOH,MAC7BlL,EAAIc,KAAKF,KAXb,8BAeF,OAAOZ,EACP,MAAM5F,GAEN,OADAzB,QAAQC,IAAIwB,GACL,M,yCAIQO,GACjB,IAAM+F,EAAQ3J,KAAKuU,WAAW3Q,GAC9B,KAAI+F,EAAMd,QAAU,GAApB,CACA,IAAMuI,EAAWpR,KAAKY,MAAM8P,OAAOS,QAAuBC,QAC1DA,EAAQoD,YAAY,IACpB,IAAMC,EAAW9K,EAAM0I,KAAI,SAAAxI,GAAC,OAAIyK,OAAOzK,EAAEpJ,OACrCkJ,EAAMd,OAAS,EACjBuI,EAAQsD,IAAI,CAAC/K,MAAO8K,EAAUE,WAAW,IAEzCvD,EAAQwD,MAAMH,EAAS,GAAI,CAACI,MAAO,EAAGF,WAAW,IAEnDvD,EAAQoD,YAAYC,M,0CAGF7Q,EAAUW,GAC5B,IAAMoF,EAAQ3J,KAAKuU,WAAW3Q,EAAGW,GACjCvE,KAAKC,MAAM6U,SAASnL,K,mCAIpB3J,KAAKC,MAAM6U,SAAS9U,KAAKY,MAAMiQ,Y,2CAI/B,IADmB,EACbO,EAAWpR,KAAKY,MAAM8P,OAAOS,QAAuBC,QACpDxI,EAAWwI,EAAQ2D,mBACrBC,EAAuB,IAAIC,IAHZ,cAIDrM,GAJC,IAInB,2BAA4B,CAAC,IAAlBsM,EAAiB,QAC1BF,EAAQG,IAAKf,SAASE,OAAOY,KAC7B,IAF0B,EAEpBE,EAAYhE,EAAQiE,kBAAkBH,GAFlB,cAGNE,GAHM,IAG1B,2BAA4C,CAAC,IAAlCE,EAAiC,QAC1CN,EAAQG,IAAKf,SAASE,OAAOgB,MAJL,gCAJT,8BAWnB,OAAON,I,0CAIPhV,KAAKgR,aACL,IAFkB,EAEZgE,EAAUhV,KAAKuV,qBACjB5L,EAAQ,GAHM,cAIF3J,KAAKY,MAAMiQ,UAJT,IAIlB,2BAAqC,CAAC,IAA3BhH,EAA0B,QAC/BmL,EAAQQ,IAAI3L,EAAEpJ,KAChBkJ,EAAMI,KAAKF,IANG,8BASlB7J,KAAKC,MAAM6U,SAASnL,K,+BAIpB,OACE,yBAAK7J,UAAU,WACb,yBAAKA,UAAU,cAAcW,GAAG,sBAC7BT,KAAKyV,gBACLzV,KAAKY,MAAM4P,UACZ,kBAAC,GAAD,CACE9O,OAAQ1B,KAAKgS,cAAc0D,KAAK1V,MAChCkB,OAAQlB,KAAK2V,cAAcD,KAAK1V,MAChCqP,WAAYrP,KAAKqP,WAAWqG,KAAK1V,MACjC6D,cAAe7D,KAAK4V,mBAAmBF,KAAK1V,MAC5CwE,eAAgBxE,KAAK6V,oBAAoBH,KAAK1V,MAC9CyE,MAAOzE,KAAKgR,WAAW0E,KAAK1V,MAC5BqI,iBAAkBrI,KAAKY,MAAMyH,iBAC7BC,oBAAqBtI,KAAKsI,oBAAoBoN,KAAK1V,MACnDuI,uBAAwBvI,KAAKY,MAAM2H,uBACnCC,0BAA2BxI,KAAKwI,0BAA0BkN,KAAK1V,c,GAvPtCG,IAAMC,W,oBC3JrC0V,GAAYC,cAAW,SAACC,GAAD,OAC3BC,aAAa,CACXC,KAAM,CACJjG,MAAO,KAETkG,OAAQ,CACN/G,OAAQ4G,EAAMI,QAAQ,SAWb,YAACnW,GACd,GAAIA,EAAMoW,WAAWxN,OAAS,EAAK,OAAQ,qCAC3C,IAAMyN,EAAUR,KAEZS,GAAK,EACHC,EAAQvW,EAAMoW,WAAWhE,KAAI,SAAAoE,GAEjC,MAAO,CACLlV,MAFFgV,GAAK,EAGHtO,MAAOwO,EAAExO,UASb,OACE,yBAAKnI,UAAWwW,EAAQJ,KAAK,eACzB,yBAAKpW,UAAU,SAAf,sBACA,yBAAKA,UAAU,UACb,kBAACwG,EAAA,EAAD,CACEoQ,aAAczW,EAAM0W,KACpB7T,kBAAgB,yBAChB0D,IAAK,EACLC,IAAKxG,EAAMoW,WAAWxN,OAAO,EAC7B9B,KAAM,KACNL,kBAAkB,MAClB8P,MAAOA,EACPpT,SAjBW,SAAC/B,EAAYkF,GAChC,IAAMkQ,EAAIlQ,EACVtG,EAAM2W,QAAQH,S,oJC+CZI,GAAoB,CACxB1B,IA7CgB,SAAC,GAAD,IAAG2B,EAAH,EAAGA,UAAH,OAChB,yBAAK7U,MAAO,CAAE8U,UAAW,WACvB,kBAACvT,EAAA,EAAD,CACEnB,MAAM,UACNI,QAASqU,EACT5W,MAAM,kBAHR,SA4CF8W,KAlCiB,SAAC,GAAD,IAAGF,EAAH,EAAGA,UAAH,OACjB,kBAAC1S,EAAA,EAAD,CAAY3B,QAASqU,EAAW5W,MAAM,YACpC,kBAAC,IAAD,QAiCF+W,OA7BmB,SAAC,GAAD,IAAGH,EAAH,EAAGA,UAAH,OACnB,kBAAC1S,EAAA,EAAD,CACE3B,QAAS,WAEHnC,OAAO4W,QAAQ,8CACjBJ,KAGJ5W,MAAM,cAEN,kBAAC,KAAD,QAoBFiX,OAhBmB,SAAC,GAAD,IAAGL,EAAH,EAAGA,UAAH,OACnB,kBAAC1S,EAAA,EAAD,CAAY3B,QAASqU,EAAW5W,MAAM,gBACpC,kBAAC,KAAD,QAeFkX,OAXmB,SAAC,GAAD,IAAGN,EAAH,EAAGA,UAAH,OACnB,kBAAC1S,EAAA,EAAD,CAAY/B,MAAM,YAAYI,QAASqU,EAAW5W,MAAM,kBACtD,kBAAC,KAAD,SAYEmX,GAAU,SAAC,GAAuB,IAArB5W,EAAoB,EAApBA,GAAIqW,EAAgB,EAAhBA,UACfQ,EAAgBT,GAAkBpW,GACxC,OACE,kBAAC6W,EAAD,CACER,UAAWA,KAKXS,GAAkB,CACtBrK,UAAW,CAAC,SAAU,gBACtBsK,UAAW,CAAC,OAAQ,UA6BTC,GAAiBvQ,aA3Gf,SAAA8O,GAAK,MAAK,CACvB0B,eAAgB,CACdC,QAAS3B,EAAMI,QAAQ,IAEzBwB,OAAQ,CACN3H,MAAO,qBAET4H,UAAW,CACT5H,MAAO,QAET6H,WAAY,CACV3J,SAAU,0BAgGmC,CAAE1G,KAAM,sBAA3BP,EA1BH,SAAC,GAAD,IACzB6Q,EADyB,EACzBA,sBAAuBxW,EADE,EACFA,MAAOyW,EADL,EACKA,cAAe1B,EADpB,EACoBA,QADpB,OAGzB,kBAAC2B,GAAA,EAAD,CACEnY,UAAWwW,EAAQoB,gBAEnB,kBAACQ,GAAA,EAAD,CACE3W,MAAOA,EACP6B,SAAU,SAAA/B,GAAK,OAAI2W,EAAc3W,EAAMC,OAAOC,QAC9C4W,UAAW,CACTrY,UAAWwW,EAAQwB,YAErBM,MACE,kBAACC,GAAA,EAAD,CACE/B,QAAS,CAAEJ,KAAMI,EAAQuB,cAI5BE,EAAsB1F,KAAI,SAAA7H,GAAI,OAC7B,kBAAC8N,GAAA,EAAD,CAAUxU,IAAK0G,EAAMjJ,MAAOiJ,GACzBA,WAQL+N,GAAW,SAACtY,GAAW,IACnBuY,EAAWvY,EAAXuY,OACFT,EAAwBR,GAAgBiB,EAAO/Q,MACrD,OAAIsQ,EACK,kBAACN,GAAD,iBAAoBxX,EAApB,CAA2B8X,sBAAuBA,KAEpD,kBAAC,KAAaU,KAASxY,IAG1ByY,GAAW,SAAAC,GAAG,OAAIA,EAAIlY,IAKtBmY,GAAa,SAACC,EAAQC,EAAgBC,EAAUC,EAAUC,EAAYC,GAqJ1E,OArJ6F,kDAI3F,WAAYjZ,GAAQ,IAAD,8BACjB,cAAMA,IACDW,MAAQ,CACXuY,QAASN,EACT3V,KAAiC,oBAAnB4V,EAAiCA,EAAe7Y,GAASA,EAAM6Y,GAC7EM,sBAAuBL,EACvBM,QAAS,GACTC,cAAe,GACfC,UAAW,GACXC,WAAY,GACZC,YAAa,EACbC,SAAU,EACVC,UAAW,CAAC,EAAG,GAAI,GACnBC,YAAaZ,EACba,iBAAkB,CAACC,KAAgBC,aACnCC,kBAAmB,IAfJ,EAJwE,4DAuB3EzY,GAEd,IADA,IAAI0Y,EAAa,GACjB,MAAqB/U,OAAOK,QAAQ0T,GAApC,eAAiD,CAAC,IAAD,sBAArCrT,EAAqC,KAAlCC,EAAkC,KAE7CoU,EAAWrU,GADI,oBAANC,EACOA,EAAE7F,KAAKY,MAAMsC,MAEb2C,EAGpBjE,QAAQC,IAAIoY,GACZja,KAAKe,SAAS,CACZwY,UAAWhY,EAAM8Q,KAAI,SAAAsG,GAAG,OAAKzT,OAAOgV,KAAKvB,GAAK9P,OAAS8P,EAAMsB,SAlC0B,iCAsChFE,GACT,IAAMC,EAAgBpa,KAAKY,MAAMsC,KAAK6K,QAOtC,OANAoM,EAAWE,SAAQ,SAACC,GAClB,IAAMC,EAAQH,EAAcI,WAAU,SAAA7B,GAAG,OAAIA,EAAIlY,KAAO6Z,KACpDC,GAAS,GACXH,EAAcK,OAAOF,EAAO,MAGzBH,IA9CkF,uCAiD/C,IAEtCM,EAFUC,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QACxB3X,EAAOlD,KAAKY,MAAMsC,KAExB,GAAIyX,EAAO,CACT,IAAMG,EAAkB5X,EAAK2F,OAAS,EAAI3F,EAAKA,EAAK2F,OAAS,GAAGpI,GAAK,EAAI,EACzEia,EAAW,uBACNxX,GADM,aAENyX,EAAMtI,KAAI,SAACsG,EAAK4B,GAAN,qBACX9Z,GAAIqa,EAAkBP,GACnB5B,QAILiC,IACFF,EAAcxX,EAAKmP,KAAI,SAAAsG,GAAG,OAAKiC,EAAQjC,EAAIlY,IAAZ,6BAAuBkY,GAAQiC,EAAQjC,EAAIlY,KAAQkY,MAEhFkC,IACFH,EAAc1a,KAAK+a,WAAWF,IAEhC7a,KAAKe,SAAS,CACZmC,KAAMwX,IAGRxB,EAAelZ,KAAKC,MAAOya,KAxE8D,gDA+EnEM,GACxB,IAAMC,EAAqC,oBAAnBnC,EAAiCA,EAAekC,GAAaA,EAAUlC,GAC/F9Y,KAAKe,SAAS,CAAEmC,KAAM+X,MAjFqE,+BAoFnF,IAAD,OACP,OACE,kBAACC,GAAA,EAAD,KACE,kBAAC,KAAD,CACEhY,KAAMlD,KAAKY,MAAMsC,KACjBiW,QAASnZ,KAAKY,MAAMuY,QACpBT,SAAUA,IAEV,kBAAC,KAAD,CACEW,QAASrZ,KAAKY,MAAMyY,QACpB8B,gBAAiB,SAACC,GAAO,EAAKra,SAAS,CAACsY,QAAS+B,OAEnD,kBAAC,KAAD,CACE3B,YAAazZ,KAAKY,MAAM6Y,YACxB4B,oBAAqB,SAACC,GAAD,OAAO,EAAKva,SAAS,CAAC0Y,YAAa6B,KACxD5B,SAAU1Z,KAAKY,MAAM8Y,SACrB6B,iBAAkB,SAACH,GAAD,OAAO,EAAKra,SAAS,CAAC2Y,SAAU0B,OAEpD,kBAAC,KAAD,CACE9B,cAAetZ,KAAKY,MAAM0Y,cAC1BkC,sBAAuB,SAACC,GAAS,EAAK1a,SAAS,CAACuY,cAAemC,KAC/DjC,WAAYxZ,KAAKY,MAAM4Y,WACvBkC,mBAAoB,SAACJ,GAAO,EAAKva,SAAS,CAACyY,WAAY8B,KACvD/B,UAAWvZ,KAAKY,MAAM2Y,UACtBoC,kBAAmB3b,KAAK4b,gBAAgBlG,KAAK1V,MAC7C6b,gBAAiB7b,KAAK8b,cAAcpG,KAAK1V,QAE3C,kBAAC,KAAD,CACE+b,WAAY/b,KAAKY,MAAMoZ,oBAGzB,kBAAC,KAAD,MACA,kBAAC,KAAD,MAEA,kBAAC,KAAD,CACEgC,iBAAkBhc,KAAKY,MAAMwY,wBAE/B,kBAAC,KAAD,CACE6C,MAAOjc,KAAKY,MAAMgZ,YAClBsC,cAAe,SAACZ,GAAD,OAAO,EAAKva,SAAS,CAAC6Y,YAAa0B,OAEpD,kBAAC,KAAD,CAAgBa,qBAAmB,IACnC,kBAAC,KAAD,CACEC,cAAe7D,KAEjB,kBAAC,KAAD,CACEtI,MAAO,IACPoM,gBAAiBrc,KAAKY,MAAM2Y,UAAU1Q,OACtCyT,iBAAe,EACfC,mBAAiB,EACjBC,iBAAkBnF,KAEpB,kBAAC,KAAD,CACEoF,YAAazc,KAAKY,MAAMiZ,mBAE1B,kBAAC,KAAD,CACEF,UAAW3Z,KAAKY,MAAM+Y,kBA5I6D,GAEvExZ,IAAMC,YAuJxBsc,GAAW9D,GACf,CACE,CAAEnR,KAAM,KAAMvH,MAAO,MACrB,CAAEuH,KAAM,QAASvH,MAAO,gBACxB,CAAEuH,KAAM,YAAavH,MAAO,gBAC5B,CAAEuH,KAAM,OAAQvH,MAAO,gBACvB,CAAEuH,KAAM,QAASvH,MAAO,gBACxB,CAAEuH,KAAM,OAAQvH,MAAO,iBAEzB,QACA,CACE,CAAEyc,WAAY,KAAM1M,MAAO,IAC3B,CAAE0M,WAAY,QAAS1M,MAAO,KAC9B,CAAE0M,WAAY,YAAa1M,MAAO,KAClC,CAAE0M,WAAY,OAAQ1M,MAAO,KAC7B,CAAE0M,WAAY,QAAS1M,MAAO,KAC9B,CAAE0M,WAAY,OAAQ1M,MAAO,MAE/B,CAAC,KAAM,QAAS,YAAa,OAAQ,QAAS,QAC9C,CACExP,GAAI,SAACyC,GAAD,OAAWA,EAAK2F,OAAS,EAAKjC,KAAKH,IAAL,MAAAG,KAAI,aAAQ1D,EAAKmP,KAAI,SAACuK,GAAD,OAAOA,EAAEnc,QAAO,EAAI,GAC3EwH,MAAO,GACPiF,UAAWqK,GAAgBrK,UAAU,GACrCjD,KAAM,GACN0D,MAAO,GACPM,KAAM,KAER,SAAChO,EAAOya,GAAiBza,EAAM6U,SAAS4F,EAAYrI,KAAI,SAACuK,GAAO,OAAO,6BAAIA,GAAX,IAAcnc,GAAI2T,SAASE,OAAOsI,EAAEnc,cAgBhGoc,GAAWjE,GACf,CACE,CAAEnR,KAAM,KAAMvH,MAAO,MACrB,CAAEuH,KAAM,OAAQvH,MAAO,QACvB,CAAEuH,KAAM,KAAMvH,MAAO,MACrB,CAAEuH,KAAM,QAASvH,MAAO,gBACxB,CAAEuH,KAAM,YAAavH,MAAO,wBAE9B,SAACD,GAAD,OAAqBA,EAAM6F,MArBMuM,KAAI,SAACyK,GACtC,IAAIzZ,EAAI6B,OAAOC,OAAO,GAAI2X,GAE1B,OADAzZ,EAAEmU,UAAYlD,OAAOjR,EAAEmU,WAChBnU,OAmBP,CACE,CAAEsZ,WAAY,KAAM1M,MAAO,KAC3B,CAAE0M,WAAY,OAAQ1M,MAAO,KAC7B,CAAE0M,WAAY,KAAM1M,MAAO,KAC3B,CAAE0M,WAAY,QAAS1M,MAAO,KAC9B,CAAE0M,WAAY,YAAa1M,MAAO,MAEpC,CAAC,KAAM,OAAQ,KAAM,QAAS,aAC9B,CACExP,GAAI,SAACyC,GAAD,OAAWA,EAAK2F,OAAS,EAAKjC,KAAKH,IAAL,MAAAG,KAAI,aAAQ1D,EAAKmP,KAAI,SAACuK,GAAD,OAAOA,EAAEnc,QAAO,EAAI,GAC3EwH,MAAO,GACPuP,UAAWD,GAAgBC,UAAU,GACrCvN,KAAM,GACN0D,MAAO,GACPM,KAAM,KAER,SAAChO,EAAOya,GAAiBza,EAAM8c,SAAsBrC,EAhCnBrI,KAAI,SAACyK,GACvC,IAAIzZ,EAAI6B,OAAOC,OAAO,GAAI2X,GAG1B,OAFAzZ,EAAE5C,GAAK2T,SAASE,OAAOjR,EAAE5C,KACzB4C,EAAEmU,UAA6B,UAAhBnU,EAAEmU,UACVnU,SAkDH2Z,GAAUpE,GACd,CACE,CAAEnR,KAAM,KAAMvH,MAAO,MACrB,CAAEuH,KAAM,QAASvH,MAAO,gBACxB,CAAEuH,KAAM,QAASvH,MAAO,kBAE1B,SAACD,GACC,IAAMgN,EAAOhN,EAAMgN,KAEnB,OADAsK,GAAgBrK,UAAYhI,OAAOgV,KAAKjN,GA3B3B,SAACA,GAEhB,IADA,IAAI/J,EAAO,GACX,MAAqBgC,OAAOK,QAAQ0H,GAApC,eAA2C,CAAC,IAAD,sBAA/BrH,EAA+B,KAA5BC,EAA4B,KACrC8S,EAAMzT,OAAOC,OAAO,CAAC1E,GAAImF,GAAIC,GACjC3C,EAAK6G,KAAK4O,GAEZ,OAAOzV,EAsBE+Z,CAAShQ,KAElB,CACE,CAAE0P,WAAY,KAAM1M,MAAO,KAC3B,CAAE0M,WAAY,QAAS1M,MAAO,KAC9B,CAAE0M,WAAY,QAAS1M,MAAO,MAEhC,CAAC,KAAM,QAAS,SAChB,CACExP,GAAI,GACJwH,MAAO,GACP5F,MAAO,YAET,SAACpC,EAAOya,GACNnD,GAAgBrK,UAAYwN,EAAYrI,KAAI,SAACuK,GAAD,OAAOA,EAAEnc,MACrDR,EAAMid,QAlCU,SAACha,GACnB,IAD4B,EACxB+J,EAAO,GADiB,cAEZ/J,GAFY,IAE5B,2BAAsB,CAAC,IAAZ0Z,EAAW,QAChB/W,EAAIX,OAAOC,OAAO,GAAIyX,UACnB/W,EAAEpF,GACTwM,EAAK2P,EAAEnc,IAAMoF,GALa,8BAO5B,OAAOoH,EA2BSkQ,CAAYzC,O,kDCpZT0C,G,kLAGf,IAAIC,EAAStb,SAASgJ,cAAc,UAChCuS,EAASvb,SAASC,eAAe,iCACtB,OAAXsb,IACFD,EAAOrS,aAAa,MAAO,iCAC3BqS,EAAOrS,aAAa,cAAe,aACnCqS,EAAOrS,aAAa,QAAS,QAC7BqS,EAAOrS,aAAa,OAAQ,2CAC5BqS,EAAOrS,aAAa,aAAchL,KAAKC,MAAMsd,WAC7CF,EAAOrS,aAAc,QAAS,gBAC9BsS,EAAO3Q,YAAY0Q,M,+BAKvB,OACI,oCACE,yBAAKvd,UAAU,YAEf,kBAAC0d,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEC,WAAY,kBAAC,KAAD,MACZC,gBAAc,mBAEd,kBAACvX,EAAA,EAAD,4BAEF,kBAACwX,GAAA,EAAD,CAAkBnd,GAAG,oBACnB,yBAAKA,GAAG,0C,GA7BgBL,aCwJvByd,G,kDAhIb,WAAY5d,GAAsB,IAAD,8BAC/B,cAAMA,IACDW,MAAQ,CACXwI,MAAO,KACP0U,UAAU,EACVC,UAAW,GACXC,YAAa,EACb3H,WAAY,IAPiB,E,gEAWZ,IAAD,OACd7L,EAAOxK,KAAKC,MAAMuK,KAClByT,EAA+B,GACX,kBAAbzT,EAAKnB,IACd4U,EAAWlU,KAAK,CAAC9B,MAAO,SAAUoB,IAAKmB,EAAKnB,MAE5C4U,EAAazT,EAAKnB,IAEpBrJ,KAAKe,SAAS,CAACgd,UAAW,IAAIG,MAAMD,EAAWpV,UAC/CsV,QAAQC,IACNH,EAAW5L,KAAI,SAACoE,GAAD,OAAO1N,MAAM0N,EAAEpN,KAAKL,MAAK,SAAAqV,GAAI,OAAIA,EAAKnV,cAEtDF,MAAM,SAAAsV,GACL,EAAKvd,SAAS,CACZ+c,UAAU,EACVC,UAAWO,EAAMjM,KAAI,SAAApI,GAAI,OAnDV,SAACA,GACtB,IADyC,EACrCsU,EAA6B,GADQ,cAE3BtU,EAAKd,KAAKQ,OAFiB,IAEzC,2BAA+B,CAAC,IAAvBE,EAAsB,QAC7BA,EAAEpJ,GAAK2T,SAASE,OAAOzK,EAAEpJ,KACzB8d,EAAUxU,KAAKF,IAJwB,8BAOzC,OADAI,EAAKd,KAAKQ,MAAQ4U,EACXtU,EA4C4BuU,CAAevU,MAC5CoM,WAAY4H,OAGhB,SAAC7U,GACC,EAAKrI,SAAS,CACZ+c,UAAU,EACV1U,e,+BAKGO,GACP,IAAI8U,EAAQze,KAAKY,MAAMmd,UACnB9T,EAAOwU,EAAMze,KAAKY,MAAMod,aACf,OAAT/T,IACFA,EAAKd,KAAKQ,MAAQA,EAClB3J,KAAKe,SAAS,CAACgd,UAAWU,O,+BAIrB3Y,GACP,IAAI2Y,EAAQze,KAAKY,MAAMmd,UACnB9T,EAAOwU,EAAMze,KAAKY,MAAMod,aACf,OAAT/T,IACFA,EAAKd,KAAKrD,MAAQA,EAClB9F,KAAKe,SAAS,CAACgd,UAAWU,O,oCAIhB/U,GACZ,IAAI+U,EAAQze,KAAKY,MAAMmd,UACnB9T,EAAOwU,EAAMze,KAAKY,MAAMod,aAChB,MAAR/T,IACFA,EAAKP,WAAaA,EAClB1J,KAAKe,SAAS,CAACgd,UAAWU,O,8BAItBxU,GACN,IAAIwU,EAAQze,KAAKY,MAAMmd,UACvBU,EAAMze,KAAKY,MAAMod,aAAe/T,EAChCjK,KAAKe,SAAS,CAACgd,UAAWU,M,qCAGbhI,GACbzW,KAAKe,SAAS,CAACid,YAAavH,M,+BAI5B,IAAIjM,EAAOxK,KAAKC,MAAMuK,KADf,EAE6CxK,KAAKY,MAAjDwI,EAFD,EAECA,MAAO0U,EAFR,EAEQA,SAAUC,EAFlB,EAEkBA,UAAWC,EAF7B,EAE6BA,YACpC,GAAI5U,EACF,OAAO,uCAAaA,EAAMsV,SACrB,GAAKZ,EAEL,CACL,IAAM7T,EAAO8T,EAAUC,GACvB,OACE,6BACE,kBAAC,EAAD,CAAQ9d,MAAOsK,EAAK/C,OACpB,yBAAK3H,UAAU,aACf,kBAAC,GAAD,CAASmK,KAAMA,EAAMC,QAASlK,KAAKkK,QAAQwL,KAAK1V,QAChD,yBAAKF,UAAU,QACb,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,iCACA,kBAAC,IAAD,4BACA,kBAAC,IAAD,sBACA,kBAAC,IAAD,kCAEF,kBAAC,IAAD,CAAU6e,aAAa,GACrB,kBAAC,GAAD,CAAS1U,KAAMA,EAAM6K,SAAU9U,KAAK8U,SAASY,KAAK1V,SAEpD,kBAAC,IAAD,CAAU2e,aAAa,GACrB,kBAACjC,GAAD,CAAU/S,MAAOM,EAAKd,KAAKQ,MAAOmL,SAAU9U,KAAK8U,SAASY,KAAK1V,SAEjE,kBAAC,IAAD,CAAU2e,aAAa,GACrB,kBAAC9B,GAAD,CAAU/W,MAAOmE,EAAKd,KAAKrD,MAAOiX,SAAU/c,KAAK+c,SAASrH,KAAK1V,SAEjE,kBAAC,IAAD,CAAU2e,aAAa,GACrB,kBAAC3B,GAAD,CAAS/P,KAAMhD,EAAKP,WAAYwT,QAASld,KAAK4e,cAAclJ,KAAK1V,WAKvE,kBAAC6e,GAAD,CACElI,KAAM3W,KAAKY,MAAMod,YACjB3H,WAAYrW,KAAKY,MAAMyV,WACvBO,QAAS5W,KAAK8e,eAAepJ,KAAK1V,QAGpC,kBAAC,GAAD,CAAUud,UAAW/S,EAAK/C,QAG1B,kBAAC,EAAD,OAxCJ,OAAO,+C,GAlFStH,IAAMC,W,oDC1BtB2e,G,uKAUM,IAAD,EACqB/e,KAAKC,MAAzB+e,EADD,EACCA,SAAUzd,EADX,EACWA,MAClB,OACE,kBAAC,KAAD,CAAmByd,SAAUA,GAC1Bzd,O,GAde0d,iBAAlBF,GAMGG,aAAe,CACpBF,SAAU,MAaCD,UCdMI,I,yDACnB,WAAYlf,GAAsB,IAAD,8BAC/B,cAAMA,IACDW,MAAQ,CACXwI,MAAO,KACP0U,UAAU,EACVhd,QAAS,MALoB,E,gEASZ,IAAD,OACZuI,EAAMrJ,KAAKC,MAAMyI,UACvBK,MAAMM,GACHL,MAAK,SAAAC,GAAG,OAAIA,EAAImW,UAChBpW,MAAK,SAACG,GACL,EAAKpI,SAAS,CACZ+c,UAAU,EACVhd,QAASqI,OAGb,SAACC,GACC,EAAKrI,SAAS,CACZ+c,UAAU,EACV1U,e,+BAKE,IAAD,EAC8BpJ,KAAKY,MAAlCwI,EADD,EACCA,MAAO0U,EADR,EACQA,SAAUhd,EADlB,EACkBA,QACzB,OAAIsI,EACK,uCAAaA,EAAMsV,SAChBZ,EAIR,oCACE,kBAAC,EAAD,CAAQ5d,MAAOF,KAAKC,MAAMC,QAC1B,yBAAKJ,UAAU,aACb,yBAAKA,UAAU,OACb,kBAAC,KAAD,CACEuf,OAAQve,EACRwe,UAAW,CAAEC,KAAMR,IACnBS,YAAY,MAIlB,kBAAC,EAAD,OAdG,+C,GAjCwBrf,IAAMC,YCDrCqf,G,uKAEF,IAAIjV,EAAOxK,KAAKC,MAAMuK,KACtB,OACE,uBAAGzK,KAAM,aAAayK,EAAK/C,MAC3B,yBAAK3H,UAAU,QACb,yBAAKA,UAAU,WAAW4N,IAAKlD,EAAKkV,SAAU9R,IAAKpD,EAAK/C,OACxD,uBAAG3H,UAAU,QAAQ0K,EAAK/C,Y,GAPftH,IAAMC,WAcnBuf,G,uKAEF,IAAInV,EAAOxK,KAAKC,MAAMuK,KACtB,OACI,yBAAK1K,UAAU,OAAOW,GAAG,WACvB,uBAAGV,KAAM,aAAayK,EAAK/C,MACzB,kBAAClF,EAAA,EAAD,CAASrC,MAAM,iCAAQsC,UAAU,OAC/B,kBAAC4B,EAAA,EAAD,CAAYC,KAAK,SAAS5D,GAAG,iBAC3B,kBAAC,KAAD,CAAsBA,GAAG,wB,GARnBN,IAAMC,WAqBtBwf,G,uKAEF,IAAMjX,EAAQ3I,KAAKC,MAAM0I,MACzB,OACE,yBAAK7I,UAAU,SACZ6I,EAAM0J,KAAI,SAAA7H,GAAI,MACE,6BAAdA,EAAK/C,KACJ,kBAAC,GAAD,CAAS3D,IAAK0G,EAAK/C,KAAM+C,KAAMA,IAC/B,kBAAC,GAAD,CAAM1G,IAAK0G,EAAK/C,KAAM+C,KAAMA,Y,GARpBrK,IAAMC,WAmBpByf,G,uKAEF,IAAIlX,EAAQ3I,KAAKC,MAAM0I,MACvB,OACE,yBAAK7I,UAAU,OACb,kBAAC,EAAD,CAAQI,MAAM,kDACd,yBAAKJ,UAAU,YACb,yBAAKA,UAAU,aACb,kBAAC,GAAD,CAAO6I,MAAOA,MAGlB,kBAAC,EAAD,W,GAXWxI,IAAMC,WA8EV0f,G,kDArDb,WAAY7f,GAAkB,IAAD,8BAC3B,cAAMA,IACDW,MAAQ,CACXwI,MAAO,KACP0U,UAAU,EACVnV,MAAO,IALkB,E,gEASR,IAAD,OAClBI,MAAM,iBACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAACG,GACL,EAAKpI,SAAS,CACZ+c,UAAU,EACVnV,MAAOQ,OAGX,SAACC,GACC,EAAKrI,SAAS,CACZ+c,UAAU,EACV1U,e,+BAKE,IAAD,EAC0BpJ,KAAKY,MAAhCwI,EADC,EACDA,MAAO0U,EADN,EACMA,SAAUnV,EADhB,EACgBA,MAGvB,OADAA,EAAQA,EAAMiB,OAAO,CADH,CAACnC,KAAM,2BAAQiY,SAAU,GAAIrW,IAAK,qBAEhDD,EACK,uCAAaA,EAAMsV,SAChBZ,EAIR,kBAAC,IAAD,CAAQiC,SAAS,KACf,kBAAC,IAAD,CAAOjc,IAAI,OAAOkc,OAAK,EAACC,KAAK,IAAIvR,UAAW,kBAAM,kBAAC,GAAD,CAAM/F,MAAOA,OAC9DA,EAAM0J,KAAI,SAAA7H,GAAI,OACb,kBAAC,IAAD,CAAO1G,IAAK0G,EAAK/C,KAAMwY,KAAM,YAAYzV,EAAK/C,KACvCiH,UAAW,kBAAM,kBAAC,GAAD,CAASlE,KAAMA,UAEzC,kBAAC,IAAD,CAAO1G,IAAI,aAAamc,KAAM,cACvBvR,UAAW,kBAAM,kBAAC,GAAD,CAASxO,MAAM,2BAAOwI,UAAW,0BACzD,kBAAC,IAAD,CAAO5E,IAAI,QAAQmc,KAAM,SAClBvR,UAAW,kBAAM,kBAAC,GAAD,CAASxO,MAAM,eAAKwI,UAAW,sBAZpD,+C,GAlCKvI,IAAMC,WCrFJ8f,QACW,cAA7B5f,OAAOC,SAAS4f,UAEe,UAA7B7f,OAAOC,SAAS4f,UAEhB7f,OAAOC,SAAS4f,SAASC,MACvB,2DCbNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFxe,SAASC,eAAe,SDkIpB,kBAAmBiK,WACrBA,UAAUuU,cAAcC,MACrBzX,MAAK,SAAA0X,GACJA,EAAaC,gBAEdC,OAAM,SAAAxX,GACLxH,QAAQwH,MAAMA,EAAMsV,c","file":"static/js/main.4e23f15e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\ntype HeaderProps = {\r\n  title: string;\r\n}\r\n\r\nexport default class Header extends React.Component<HeaderProps, object> {\r\n  render() {\r\n    return (\r\n      <header>\r\n        <div className=\"page-title\">\r\n          <div className=\"container\">\r\n            <div className=\"topbar\">\r\n              <div className=\"links\">\r\n                <a href=\"#/contribute\">\r\n                  如何贡献\r\n                </a>\r\n                <a href=\"#/about\">\r\n                  关于\r\n                </a>\r\n                <a href=\"https://github.com/AniNet-Project\">\r\n                  GitHub\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"container title\">\r\n            <p className=\"sub\">\r\n              <a href=\"/\">\r\n                AniNet\r\n              </a>\r\n            </p>\r\n            <h1>{this.props.title}</h1>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\n\r\n\r\nconst Busuanzi = () => {\r\n  const isHome = window.location.href.endsWith('#/')\r\n  if (isHome) {\r\n    return (\r\n      <div className=\"busuanzi\">\r\n        <span id=\"busuanzi_container_site_pv\"> 本站总访问量<span id=\"busuanzi_value_site_pv\"></span>次 </span>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <></>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default class Footer extends React.Component<object, object> {\r\n  render() {\r\n    return (\r\n      <div className=\"footer\">\r\n        <div className=\"container\">\r\n          <a href=\"https://github.com/AniNet-Project\">\r\n            <GitHubIcon/>\r\n          </a>\r\n          <a href=\"mailto:nanguage@yahoo.com\">\r\n            <EmailIcon id=\"email-icon\"/>\r\n          </a>\r\n\r\n          <Busuanzi/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {useState} from 'react'\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport TuneIcon from '@material-ui/icons/Tune';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\n\r\nimport { mergeInfo } from './utils'\r\nimport { SourceItem, ItemInfo } from './datatypes'\r\n\r\n\r\ntype EditOptionsDialogProps = {\r\n  setOpt: (opt: any) => void,\r\n  getOpt: () => any,\r\n}\r\ntype EditOptionsDialogState = {\r\n  open: boolean,\r\n  content: string,\r\n}\r\n\r\nclass EditOptionsDialog extends React.Component<EditOptionsDialogProps, EditOptionsDialogState> {\r\n  constructor(props: EditOptionsDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      content: \"\"\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n    this.setTextArea()\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  setTextArea() {\r\n    let opt = this.props.getOpt()\r\n    let content = JSON.stringify(opt, null, 2)\r\n    this.setState({content: content})\r\n  }\r\n\r\n  textChanged(event: any) {\r\n    this.setState({\r\n      content: event.target.value\r\n    })\r\n  }\r\n\r\n  handleClickConfirm() {\r\n    let options;\r\n    try {\r\n      options = JSON.parse(this.state.content)\r\n      this.props.setOpt(options)\r\n      this.setState({open: false})\r\n    } catch(err) {\r\n      console.log(err)\r\n      let ta = document.getElementById(\"edit-options-content\")\r\n      if (ta !== null) {\r\n        ta.style.border = \"2px solid #ff3333\"\r\n      }\r\n      let tip = document.getElementById(\"edit-options-tips\")\r\n      console.log(tip)\r\n      if (tip !== null) {\r\n        tip.innerHTML = \"JSON 解析失败，请检查。\"\r\n        tip.style.color = \"#ff3333\"\r\n        tip.style.fontSize = \"10px\"\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"EditOptionsDialog\">\r\n        <Tooltip title=\"编辑视图配置\" placement=\"top\">\r\n          <EditIcon onClick={() => {this.handleClickOpen()}}/>\r\n        </Tooltip>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">编辑网络视图配置</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              直接通过 JSON 对网络视图进行配置，可配置项目细节可以参考\r\n              <a href=\"https://visjs.github.io/vis-network/docs/network/\">vis-network 文档</a> 。\r\n            </DialogContentText>\r\n            <p id=\"edit-options-tips\"> </p>\r\n            <textarea id=\"edit-options-content\"\r\n              rows={18} cols={72}\r\n              value={this.state.content}\r\n              onChange={(e) => {this.textChanged(e)}}\r\n              />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => {this.handleClose()}} color=\"primary\">\r\n              取消\r\n            </Button>\r\n            <Button onClick={() => {this.handleClickConfirm()}} color=\"primary\">\r\n              确定\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\ntype SearchDialogProps = {\r\n  queryAndFocus: (q: string) => void,\r\n}\r\ntype SearchDialogState = {\r\n  open: boolean,\r\n  queryText: string,\r\n}\r\n\r\nclass SearchDialog extends React.Component<SearchDialogProps, SearchDialogState> {\r\n  constructor(props: SearchDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      queryText: \"\",\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  handleClickSearch() {\r\n    const q = this.state.queryText\r\n    this.props.queryAndFocus(q)\r\n    this.setState({open: false, queryText: \"\"})\r\n  }\r\n\r\n  textChanged(event: any) {\r\n    this.setState({\r\n      queryText: event.target.value\r\n    })\r\n  }\r\n\r\n  handlePressEnter(event: any) {\r\n    if (event.key === \"Enter\") {\r\n      this.handleClickSearch()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Tooltip title=\"搜索\" placement=\"top\">\r\n          <SearchIcon onClick={() => this.handleClickOpen()}/>\r\n        </Tooltip>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogContent id=\"searchDialog\">\r\n            <InputBase\r\n              value={this.state.queryText}\r\n              onChange={(e) => this.textChanged(e)}\r\n              onKeyPress={(e) => this.handlePressEnter(e)}\r\n              placeholder=\"输入节点标签（如，label:苍崎青子）或ID（如，id:1）\"\r\n            />\r\n            <IconButton type=\"submit\" onClick={() => this.handleClickSearch()} >\r\n              <SearchIcon/>\r\n            </IconButton>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\ntype FilterDialogProps = {\r\n  queryAndFilter: (q: string, reverse: boolean) => void,\r\n  reset: () => void,\r\n}\r\ntype FilterDialogState = {\r\n  open: boolean,\r\n  queryText: string,\r\n  reverse: boolean,\r\n}\r\n\r\nclass FilterDialog extends React.Component<FilterDialogProps, FilterDialogState> {\r\n  constructor(props: FilterDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      queryText: \"\",\r\n      reverse: true,\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  handleClickFilter() {\r\n    const q = this.state.queryText\r\n    this.props.queryAndFilter(q, this.state.reverse)\r\n    this.setState({open: false, queryText: \"\"})\r\n  }\r\n\r\n  handleClickReset() {\r\n      this.props.reset()\r\n      this.setState({open: false, queryText: \"\"})\r\n  }\r\n\r\n  textChanged(event: any) {\r\n    this.setState({\r\n      queryText: event.target.value\r\n    })\r\n  }\r\n\r\n  handlePressEnter(event: any) {\r\n    if (event.key === \"Enter\") {\r\n      this.handleClickFilter()\r\n    }\r\n  }\r\n\r\n  handleChangeReverse(event: any) {\r\n    this.setState({\r\n      reverse: event.target.checked\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Tooltip title=\"筛选\" placement=\"top\">\r\n          <FilterListIcon onClick={() => this.handleClickOpen()}/>\r\n        </Tooltip>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogContent id=\"filterDialog\">\r\n            <InputBase\r\n              value={this.state.queryText}\r\n              onChange={(e) => this.textChanged(e)}\r\n              onKeyPress={(e) => this.handlePressEnter(e)}\r\n              placeholder=\"用于筛选的属性和正则表达式（如：categorie:person）\"\r\n            />\r\n            <IconButton type=\"submit\" onClick={() => this.handleClickFilter()} >\r\n              <Tooltip title=\"筛选\" placement=\"top\">\r\n                <FilterListIcon/>\r\n              </Tooltip>\r\n            </IconButton>\r\n            <IconButton type=\"submit\" onClick={() => this.handleClickReset()} >\r\n              <Tooltip title=\"重置\" placement=\"top\">\r\n                <AutorenewIcon/>\r\n              </Tooltip>\r\n            </IconButton>\r\n            <Tooltip title=\"反选\" placement=\"top\">\r\n              <Checkbox checked={this.state.reverse} onChange={(e) => this.handleChangeReverse(e)}/>\r\n            </Tooltip>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst defaultOpt = (oldOpt: any) => {\r\n  const opt = Object.assign({}, oldOpt)\r\n  if (!(\"physics\" in opt)) { opt.physics = {} }\r\n  opt.physics.solver = \"forceAtlas2Based\"\r\n  let atlas;\r\n  if (!(\"forceAtlas2Based\" in opt.physics)) {\r\n    atlas = {}\r\n    opt.physics.forceAtlas2Based = atlas\r\n  } else {\r\n    atlas = opt.physics.forceAtlas2Based\r\n  }\r\n  const defaults = {\r\n    gravitationalConstant: -20,\r\n    centralGravity: 0.002,\r\n    springLength: 100,\r\n    springConstant: 0.01,\r\n  }\r\n  for (const [k, v] of Object.entries(defaults)) {\r\n    if (!(k in atlas)) {\r\n      atlas[k] = v\r\n    }\r\n  }\r\n  if (!(\"edges\" in opt)) { opt.edges = {} }\r\n  if (!(\"font\" in opt.edges)) { opt.edges.font = {} }\r\n  if (!(\"size\" in opt.edges.font)) { opt.edges.font.size = 14 }\r\n  return opt\r\n}\r\n\r\n\r\ntype sliderProps = {\r\n  setOpt: (opt: any) => void,\r\n  getOpt: () => any,\r\n}\r\n\r\nconst GravitationalConstantSlider = (props: sliderProps) => {\r\n  const opt = defaultOpt(props.getOpt())\r\n  let atlas = opt.physics.forceAtlas2Based\r\n  const [value, setValue] = useState(atlas.gravitationalConstant)\r\n\r\n  const handleChange = (event: any, newValue: number | number[]) => {\r\n    atlas.gravitationalConstant = newValue\r\n    setValue(newValue)\r\n    props.setOpt(opt)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography gutterBottom>\r\n        引力常数\r\n      </Typography>\r\n      <Slider\r\n        value={value}\r\n        onChange={handleChange}\r\n        min={-100}\r\n        max={0}\r\n        valueLabelDisplay=\"auto\"\r\n        aria-labelledby=\"continuous-slider\"\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nconst SpringConstantSlider = (props: sliderProps) => {\r\n  const opt = defaultOpt(props.getOpt())\r\n  let atlas = opt.physics.forceAtlas2Based\r\n  const [value, setValue] = useState(Math.log10(atlas.springConstant))\r\n\r\n  const handleChange = (event: any, newValue: number | number[]) => {\r\n    const newVal = 10**(newValue as number)\r\n    atlas.springConstant = newVal\r\n    setValue(newValue as number)\r\n    props.setOpt(opt)\r\n  }\r\n\r\n  const labelFormat = (value: number) => {\r\n    return \"1e^\" + value\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography gutterBottom>\r\n        弹簧常数\r\n      </Typography>\r\n      <Slider\r\n        value={value}\r\n        onChange={handleChange}\r\n        step={0.5}\r\n        min={-5}\r\n        max={0}\r\n        valueLabelDisplay=\"auto\"\r\n        valueLabelFormat={labelFormat}\r\n        aria-labelledby=\"non-linear-slider\"\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nconst CustomSwitch = withStyles({\r\n  switchBase: {\r\n    color: \"#3f51b5\",\r\n    '&$checked': {\r\n      color: \"#3f51b5\",\r\n    },\r\n    '&$checked + $track': {\r\n      backgroundColor: \"#3f51b5\",\r\n    },\r\n  },\r\n  checked: {},\r\n  track: {},\r\n})(Switch);\r\n\r\n\r\nconst PhysicsSwitch = (props: sliderProps) => {\r\n  const opt = defaultOpt(props.getOpt())\r\n  const [value, setValue] = useState(opt.physics.enabled)\r\n\r\n  const handleChange = (event: any) => {\r\n    const checked = event.target.checked\r\n    opt.physics.enabled = checked\r\n    setValue(checked)\r\n    props.setOpt(opt)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography gutterBottom>\r\n        物理效果\r\n      </Typography>\r\n      <CustomSwitch checked={value} onChange={handleChange} name=\"physicsCheck\" />\r\n    </>\r\n  )\r\n\r\n}\r\n\r\n\r\nconst HiddenEdgeLabelSwitch = (props: sliderProps) => {\r\n  const opt = defaultOpt(props.getOpt())\r\n  const [value, setValue] = useState(opt.edges.font.size === 0)\r\n\r\n  const handleChange = (event: any) => {\r\n    const checked = event.target.checked\r\n    if (checked) {\r\n      opt.edges.font.size = 0\r\n    } else {\r\n      opt.edges.font.size = 14\r\n    }\r\n    setValue(checked)\r\n    props.setOpt(opt)\r\n    console.log(opt)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Typography gutterBottom>\r\n        隐藏边标签\r\n      </Typography>\r\n      <CustomSwitch checked={value} onChange={handleChange} name=\"hiddenEdgeLabelCheck\" />\r\n    </>\r\n  )\r\n\r\n}\r\n\r\n\r\ntype TuneDialogProps = {\r\n  setOpt: (opt: any) => void,\r\n  getOpt: () => any,\r\n}\r\ntype TuneDialogState = {\r\n  open: boolean\r\n}\r\n\r\nclass TuneDialog extends React.Component<TuneDialogProps, TuneDialogState> {\r\n  constructor(props: TuneDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Tooltip title=\"视图调整\" placement=\"top\">\r\n          <TuneIcon onClick={() => this.handleClickOpen()}/>\r\n        </Tooltip>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">网络视图调整</DialogTitle>\r\n          <DialogContent id=\"tuneDialog\">\r\n            <PhysicsSwitch\r\n              setOpt={this.props.setOpt}\r\n              getOpt={this.props.getOpt}/>\r\n            <GravitationalConstantSlider\r\n              setOpt={this.props.setOpt}\r\n              getOpt={this.props.getOpt}/>\r\n            <SpringConstantSlider\r\n              setOpt={this.props.setOpt}\r\n              getOpt={this.props.getOpt}/>\r\n            <HiddenEdgeLabelSwitch\r\n              setOpt={this.props.setOpt}\r\n              getOpt={this.props.getOpt}/>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst InforBoardSwitch = (props: {switchState: boolean, setSwitch: (on: boolean) => void}) => {\r\n  const handleChange = (event: any) => {\r\n    const checked = event.target.checked\r\n    props.setSwitch(checked)\r\n  }\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={<CustomSwitch checked={props.switchState} onChange={handleChange} name=\"inforBoardCheck\" />}\r\n      label=\"弹出信息\"\r\n      labelPlacement=\"start\"\r\n    />\r\n    \r\n  )\r\n}\r\n\r\n\r\nconst HiddenUnselectedSwitch = (props: {switchState: boolean, setSwitch: (on: boolean) => void}) => {\r\n  const handleChange = (event: any) => {\r\n    const checked = event.target.checked\r\n    props.setSwitch(checked)\r\n  }\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={<CustomSwitch checked={props.switchState} onChange={handleChange} name=\"hiddenUnselectedCheck\" />}\r\n      label=\"隐藏未选中节点\"\r\n      labelPlacement=\"start\"\r\n    />\r\n    \r\n  )\r\n}\r\n\r\n\r\ntype SettingDialogProps = {\r\n  inforBoardSwitch: boolean,\r\n  setInforBoardSwitch: (on: boolean) => void,\r\n  hiddenUnselectedSwitch: boolean,\r\n  setHiddenUnselectedSwitch: (on: boolean) => void,\r\n}\r\ntype SettingDialogState = {\r\n  open: boolean\r\n}\r\n\r\nclass SettingDialog extends React.Component<SettingDialogProps, SettingDialogState> {\r\n  constructor(props: SettingDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Tooltip title=\"设置\" placement=\"top\">\r\n          <SettingsIcon onClick={() => this.handleClickOpen()}/>\r\n        </Tooltip>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">设置</DialogTitle>\r\n          <DialogContent id=\"tuneDialog\">\r\n            <InforBoardSwitch\r\n              switchState={this.props.inforBoardSwitch}\r\n              setSwitch={this.props.setInforBoardSwitch}\r\n            />\r\n            <HiddenUnselectedSwitch\r\n              switchState={this.props.hiddenUnselectedSwitch}\r\n              setSwitch={this.props.setHiddenUnselectedSwitch}\r\n            />\r\n          </DialogContent>\r\n        </Dialog>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\ntype setInfoMth = (info: ItemInfo) => void\r\n\r\ntype ImportDialogProps = {\r\n  setInfo: setInfoMth,\r\n  info: ItemInfo,\r\n}\r\ntype ImportDialogState = {\r\n  open: boolean,\r\n  sourceUrl: string,\r\n  items: Array<SourceItem>,\r\n  selected: null | SourceItem\r\n}\r\n\r\n\r\nclass ImportDialog extends React.Component<ImportDialogProps, ImportDialogState> {\r\n\r\n  constructor(props: ImportDialogProps) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      sourceUrl: \"https://raw.githubusercontent.com/AniNet-Project/crawler/master/data/bgm.json\",\r\n      items: [],\r\n      selected: null,\r\n    }\r\n  }\r\n\r\n  handleClickOpen() {\r\n    this.setState({open: true})\r\n    if (this.state.items.length === 0) {\r\n      this.loadSource()\r\n    }\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({open: false})\r\n  };\r\n\r\n  sourceChanged(event: any) {\r\n    this.setState({\r\n      sourceUrl: event.target.value\r\n    })\r\n    this.loadSource()\r\n  }\r\n\r\n  loadSource() {\r\n    fetch(this.state.sourceUrl)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        this.setState({\r\n          items: data.data\r\n        })\r\n      },\r\n      (error) => {\r\n        console.log(error)\r\n        this.setState({\r\n          items: []\r\n        })\r\n      })\r\n  }\r\n\r\n  onSelectedChange(event: any, newValue: SourceItem | null) {\r\n    this.setState({\r\n      selected: newValue\r\n    })\r\n  }\r\n\r\n  loadItem() {\r\n    if (this.state.selected === null) {return}\r\n    const url = this.state.selected.data\r\n    fetch(url)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const newInfo = mergeInfo(this.props.info, data)\r\n        this.props.setInfo(newInfo)\r\n      },\r\n      (error) => {\r\n        console.log(error)\r\n      })\r\n    this.handleClose()\r\n  }\r\n\r\n  handleClickConfirm() {\r\n    this.loadItem()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <button onClick={() => this.handleClickOpen()}>导入预定义数据</button>\r\n        <Dialog open={this.state.open} onClose={() => {this.handleClose()}} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">从数据源导入</DialogTitle>\r\n\r\n          <DialogContent id=\"importDialog\">\r\n            <Typography gutterBottom>\r\n              数据源 {this.state.selected?.name}\r\n            </Typography>\r\n            <InputBase\r\n              value={this.state.sourceUrl}\r\n              onChange={(e) => this.sourceChanged(e)}\r\n              placeholder=\"请输入数据源索引文件 URL\"\r\n            />\r\n            <Typography gutterBottom>\r\n              条目\r\n            </Typography>\r\n            <Autocomplete\r\n              value={this.state.selected}\r\n              onChange={(e, n) => {this.onSelectedChange(e, n)}}\r\n              id=\"import-items-filter\"\r\n              options={this.state.items}\r\n              getOptionLabel={(item: SourceItem) => item.name}\r\n              renderInput={(params: any) => <TextField {...params} label=\"筛选\" variant=\"outlined\" />}\r\n            />\r\n\r\n            <DialogActions>\r\n              <Button onClick={() => {this.handleClose()}} color=\"primary\">\r\n                取消\r\n              </Button>\r\n              <Button onClick={() => {this.handleClickConfirm()}} color=\"primary\">\r\n                确定\r\n              </Button>\r\n            </DialogActions>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nexport {\r\n  EditOptionsDialog, SearchDialog,\r\n  FilterDialog, TuneDialog, SettingDialog,\r\n  ImportDialog,\r\n}\r\n","import { ItemInfo, NodeType, EdgeType } from \"./datatypes\";\r\n\r\nconst exportToJson = (objectData: any, fileName: string) => {\r\n  let contentType = \"application/json;charset=utf-8;\";\r\n  if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n    var blob = new Blob([decodeURIComponent(encodeURI(JSON.stringify(objectData)))], { type: contentType });\r\n    navigator.msSaveOrOpenBlob(blob, fileName);\r\n  } else {\r\n    var a = document.createElement('a');\r\n    a.download = fileName;\r\n    a.href = 'data:' + contentType + ',' + encodeURIComponent(JSON.stringify(objectData, null, 2));\r\n    a.target = '_blank';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n}\r\n\r\n\r\nconst shorterString = (str: string, limit: number) => {\r\n  let res = \"\" + str\r\n  if (str.length > limit) {\r\n    res = str.slice(0, limit) \r\n    res += \"...\"\r\n  }\r\n  return res\r\n}\r\n\r\nconst mergeInfo = (info_a: ItemInfo, info_b: ItemInfo) => {\r\n  let new_ = Object.assign({}, info_a)\r\n  for (const [k, v] of Object.entries(info_b.categories)) {\r\n    new_.categories[k] = v\r\n  }\r\n  let nodes: Record<number, NodeType> = {} \r\n  for (const n of info_a.data.nodes.concat(info_b.data.nodes)) {\r\n    nodes[n.id] = n;\r\n  }\r\n  let edges: Record<number, EdgeType> = {} \r\n  for (const e of info_a.data.edges.concat(info_b.data.edges)) {\r\n    edges[e.id] = e;\r\n  }\r\n  new_.data.nodes = []\r\n  for (const n of Object.values(nodes)) {new_.data.nodes.push(n)}\r\n  new_.data.edges = []\r\n  for (const e of Object.values(edges)) {new_.data.edges.push(e)}\r\n  return new_\r\n}\r\n\r\n\r\nexport {exportToJson, shorterString, mergeInfo}\r\n","import React from 'react'\r\n\r\nimport { exportToJson } from './utils'\r\nimport { ImportDialog } from './Dialogs'\r\nimport { ItemInfo } from './datatypes'\r\n\r\ntype setInfoMth = (info: ItemInfo) => void\r\n\r\nconst buildFileSelector = (setInfo: setInfoMth) => {\r\n  const fileSelector = document.createElement('input');\r\n  fileSelector.setAttribute('type', 'file');\r\n  fileSelector.setAttribute('multiple', 'multiple');\r\n  fileSelector.setAttribute('accept', '.json')\r\n  fileSelector.addEventListener('change', (event) => {\r\n    const target = event.target as HTMLInputElement\r\n    let file: File = (target.files as FileList)[0]\r\n    let reader = new FileReader()\r\n    reader.onload = () => {\r\n      setInfo(JSON.parse(reader.result as string))\r\n    }\r\n    if (file !== undefined) {\r\n      reader.readAsText(file)\r\n    }\r\n  })\r\n  return fileSelector;\r\n}\r\n\r\ntype UploadBtnProps = {\r\n  setInfo: setInfoMth\r\n}\r\n\r\ntype UploadBtnState = {\r\n  fileSelector: HTMLInputElement,\r\n}\r\n\r\nclass UploadBtn extends React.Component<UploadBtnProps, UploadBtnState> {\r\n  componentDidMount(){\r\n    this.setState({\r\n      fileSelector: buildFileSelector(this.props.setInfo)\r\n    })\r\n  }\r\n  \r\n  handleFileSelect = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    this.state.fileSelector.click();\r\n  }\r\n  \r\n  render(){\r\n    return <button onClick={this.handleFileSelect}>打开文件 (JSON)</button>\r\n  }\r\n}\r\n\r\ntype ToolBarProps = {\r\n  info: ItemInfo,\r\n  setInfo: setInfoMth,\r\n}\r\n\r\n\r\nexport default class ToolBar extends React.Component<ToolBarProps, object> {\r\n  render() {\r\n    return (\r\n      <div className=\"toolbar\">\r\n        <div className=\"rightside\">\r\n          <ImportDialog info={this.props.info} setInfo={this.props.setInfo}/>\r\n          <UploadBtn setInfo={this.props.setInfo}/>\r\n          <button onClick={() => {exportToJson(this.props.info, \"export.json\")}}>保存文件 (JSON)</button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Draggable from 'react-draggable';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport { shorterString } from './utils'\r\nimport { NodeType, CatType, Pos2d } from './datatypes'\r\n\r\n\r\ntype infoBoardProps = {\r\n  pos: Pos2d,\r\n  node: NodeType,\r\n  cats: Record<string, CatType>,\r\n  close: () => void,\r\n}\r\n\r\nexport default (props: infoBoardProps) => {\r\n  const node = props.node\r\n  const pos = props.pos\r\n  let cat = props.cats[node.categorie]\r\n  const boardStyle = {\r\n    top: pos.y + \"px\",\r\n    left: pos.x + \"px\",\r\n  }\r\n  const catStyle = 'color' in cat ? {color: cat.color} : {}\r\n  return (\r\n    <Draggable>\r\n      <div className=\"infoBoard\" style={boardStyle}>\r\n        <CloseIcon className=\"closeButton\" onClick={() => props.close()} />\r\n        <div className=\"content\">\r\n          <img src={('image' in node) ? node.image : ''} alt=\"\"/>\r\n          <div className=\"title\">\r\n            <div className=\"name\">\r\n              {node.label}\r\n            </div>\r\n            <div className=\"categorie\" style={catStyle}>\r\n              {(cat !== undefined) ? cat.label : \"\"}\r\n            </div>\r\n          </div>\r\n          <div className=\"describe\">\r\n            { shorterString(node.info, 80) }\r\n          </div>\r\n          {\r\n            ('link' in node) && (node['link'] !== \"\") ?\r\n            <a className=\"link\" href={node.link}>链接</a> :\r\n            null\r\n          }\r\n        </div>\r\n      </div>\r\n    </Draggable>\r\n  )\r\n}\r\n","/** Come from:\r\n *     https://material-ui.com/zh/components/progress/#circular-with-label\r\n */\r\n\r\nimport React from 'react';\r\nimport CircularProgress, { CircularProgressProps } from '@material-ui/core/CircularProgress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nexport default (props: CircularProgressProps & { value: number }) => {\r\n  if (props.value >= 100) {\r\n    return (<></>)\r\n  }\r\n  return (\r\n    <Box position=\"relative\" display=\"inline-flex\">\r\n      <CircularProgress {...props} />\r\n      <Box\r\n        top={0}\r\n        left={0}\r\n        bottom={0}\r\n        right={0}\r\n        position=\"absolute\"\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n      >\r\n        <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">\r\n          {`${Math.round( props.value,)}%`}\r\n        </Typography>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from 'react'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport { Network as NetworkType, IdType } from 'vis/index'\r\n\r\n\r\nimport { EditOptionsDialog, SearchDialog, FilterDialog, TuneDialog, SettingDialog } from './Dialogs'\r\nimport { Network, Node, Edge } from 'react-vis-network'\r\nimport { ItemInfo, NodeType, EdgeType, CatType, Pos2d } from './datatypes'\r\nimport InfoBoard from './InfoBoard'\r\nimport CircularProgress from './CircularProgressWithLabel'\r\n\r\n\r\nconst getCanvas = () => document.getElementsByTagName(\"canvas\")[0]\r\n\r\n\r\nconst DefaultNetStyle = {\r\n  NodeColor: \"#66bbff\",\r\n  NodeBorderWidth: 3,\r\n}\r\n\r\n\r\nconst createNode = (n: NodeType, catgories: Record<string, CatType>) => {\r\n  let cat = catgories[n.categorie]\r\n  let color;\r\n  if (cat) {\r\n    color = cat.color\r\n  } else {\r\n    color = DefaultNetStyle.NodeColor\r\n  }\r\n  return (\r\n    <Node key={n.id}\r\n      id={n.id} label={n.label}\r\n      shape=\"circularImage\"\r\n      image={n.image}\r\n      color={color}\r\n      borderWidth={DefaultNetStyle.NodeBorderWidth}\r\n    />\r\n  )\r\n}\r\n\r\nconst createEdge = (e: EdgeType) => {\r\n  let arrows = \"\"\r\n  if (('direction' in e) && (e['direction'] === true)) { arrows = \"to\" }\r\n  return (\r\n    <Edge key={e.id} id={e.id} arrows={arrows}\r\n          from={e.from} to={e.to} label={e.label}\r\n    />\r\n  )\r\n}\r\n\r\n\r\ntype ViewControlProps = {\r\n  setOpt: (opt: any) => void,\r\n  getOpt: () => any,\r\n  captureImg: () => void,\r\n  queryAndFocus: (q: string) => void,\r\n  queryAndFilter: (q: string, reverse: boolean) => void,\r\n  reset: () => void,\r\n  inforBoardSwitch: boolean,\r\n  setInforBoardSwitch: (on: boolean) => void,\r\n  hiddenUnselectedSwitch: boolean,\r\n  setHiddenUnselectedSwitch: (on: boolean) => void,\r\n}\r\n\r\nconst ViewControl = (props: ViewControlProps) => {\r\n  const [fullScreenMode, setFullScreenMode] = useState(false)\r\n  let oriHeight = 300\r\n\r\n  const enterFullScreen = () => {\r\n    let canvas = getCanvas()\r\n    let fullRegion = document.getElementById(\"full-screen-region\")\r\n    fullRegion?.requestFullscreen()\r\n    oriHeight = canvas.clientHeight\r\n    canvas.style.height = window.screen.height + \"px\";\r\n    setFullScreenMode(true)\r\n    document.addEventListener('fullscreenchange', (event) => {\r\n      if (!(document.fullscreenElement)) {\r\n        turnBackSize()\r\n        setFullScreenMode(false)\r\n      }\r\n    });\r\n  }\r\n\r\n  const turnBackSize = () => {\r\n    let canvas = getCanvas()\r\n    canvas.style.height = oriHeight + \"px\"\r\n  }\r\n\r\n  const exitFullScreen = () => {\r\n    document.exitFullscreen()\r\n    turnBackSize()\r\n    setFullScreenMode(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"viewControl\">\r\n      <SearchDialog queryAndFocus={props.queryAndFocus}/>\r\n      <FilterDialog queryAndFilter={props.queryAndFilter} reset={props.reset}/>\r\n      <Tooltip title=\"截图\" placement=\"top\"><PhotoCameraIcon onClick={() => props.captureImg()}/></Tooltip>\r\n      <TuneDialog setOpt={props.setOpt} getOpt={props.getOpt}/>\r\n      <EditOptionsDialog setOpt={props.setOpt} getOpt={props.getOpt}/>\r\n      <SettingDialog\r\n        inforBoardSwitch={props.inforBoardSwitch}\r\n        setInforBoardSwitch={props.setInforBoardSwitch}\r\n        hiddenUnselectedSwitch={props.hiddenUnselectedSwitch}\r\n        setHiddenUnselectedSwitch={props.setHiddenUnselectedSwitch}\r\n      />\r\n      {fullScreenMode\r\n      ? <Tooltip title=\"退出全屏\" placement=\"top\"><FullscreenExitIcon onClick={exitFullScreen}/></Tooltip>\r\n      : <Tooltip title=\"全屏\" placement=\"top\"><FullscreenIcon onClick={enterFullScreen}/></Tooltip>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst DEFAULT_NETWORK_OPTIONS = {\r\n  autoResize: false,\r\n  nodes: {\r\n    shape: \"dot\",\r\n  },\r\n  physics: {\r\n    enabled: true,\r\n    stabilization: false,\r\n    solver: 'forceAtlas2Based',\r\n    forceAtlas2Based: {\r\n      gravitationalConstant: -20,\r\n      centralGravity: 0.002,\r\n      springLength: 100,\r\n      springConstant: 0.01\r\n    },\r\n  },\r\n  edges: {\r\n    width: 0.3,\r\n    color: {\r\n      inherit: \"to\"\r\n    }\r\n  },\r\n  interaction: {\r\n    hideEdgesOnDrag: false,\r\n    hover: true,\r\n    multiselect: true,\r\n  }\r\n}\r\n\r\ntype NetViewProps = {\r\n  info: ItemInfo,\r\n  setNodes: (nodes: Array<NodeType>) => void,\r\n}\r\n\r\ntype NetworkRef = {\r\n  network: NetworkType\r\n}\r\n\r\ntype NetViewState = {\r\n  infoBoard: JSX.Element | null,\r\n  loadingRatio: number,\r\n  inforBoardSwitch: boolean,\r\n  netRef: React.RefObject<NetworkRef>,\r\n  netOptions: any,\r\n  oldNodes: Array<NodeType>,\r\n  hiddenUnselectedSwitch: boolean,\r\n}\r\n\r\nexport default class NetView extends React.Component<NetViewProps, NetViewState> {\r\n  constructor(props: NetViewProps) {\r\n    super(props)\r\n    this.state = {\r\n      infoBoard: null,\r\n      loadingRatio: 0,\r\n      inforBoardSwitch: true,\r\n      netRef: React.createRef(),\r\n      netOptions: null,\r\n      oldNodes: props.info.data.nodes,\r\n      hiddenUnselectedSwitch: false\r\n    }\r\n  }\r\n\r\n  setHiddenUnselectedSwitch(on: boolean) {\r\n    const oldState = this.state.hiddenUnselectedSwitch\r\n    if ((oldState === true) && (on === false)) {\r\n      this.resetNodes()\r\n    } else if((oldState === false) && (on === true)) {\r\n      this.hiddenNonSelected()\r\n    }\r\n    this.setState({\r\n      hiddenUnselectedSwitch: on\r\n    })\r\n  }\r\n\r\n  handlePopup (params: any) {\r\n    const network = (this.state.netRef.current as NetworkRef).network\r\n    const node_id = network.getNodeAt(params.pointer.DOM)\r\n    const select_node = (typeof node_id !== \"undefined\")\r\n    console.log(node_id)\r\n    const pos: Pos2d = {x: 20, y: 20}\r\n\r\n    const create_board = () => {\r\n      let node = this.props.info.data.nodes.find((n) => (n.id === node_id))\r\n      return <InfoBoard pos={pos} node={node as NodeType}\r\n                        cats={this.props.info.categories}\r\n                        close={() => (this.setState({infoBoard: null}))}/>\r\n    }\r\n\r\n    let board = this.state.infoBoard\r\n    if (select_node && (board === null) && this.state.inforBoardSwitch) {\r\n      this.setState({infoBoard: create_board()})\r\n    } else if (select_node && (board !== null) && this.state.inforBoardSwitch) {\r\n      this.setState({infoBoard: create_board()})\r\n    } else if (board !== null ) {\r\n      this.setState({infoBoard: null})\r\n    }\r\n  }\r\n\r\n  handleHidden(params: any) {\r\n    if (!(this.state.hiddenUnselectedSwitch)) {return}\r\n    const select_node = (params.nodes.length > 0)\r\n    if (select_node) {\r\n      this.hiddenNonSelected()\r\n    } else {\r\n      this.resetNodes()\r\n    }\r\n  }\r\n\r\n  handleClick(params: any) {\r\n    this.handlePopup(params)\r\n    this.handleHidden(params)\r\n  }\r\n\r\n  setInforBoardSwitch(on: boolean) {\r\n    this.setState({\r\n      inforBoardSwitch: on\r\n    })\r\n  }\r\n\r\n  setNetOptions(options: any) {\r\n    let network = (this.state.netRef.current as NetworkRef).network\r\n    network.setOptions(options)\r\n    this.setState({netOptions: options})\r\n  }\r\n\r\n  getNetOptions() {\r\n    return this.state.netOptions\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setNetOptions(DEFAULT_NETWORK_OPTIONS)\r\n    this.registerLoading()\r\n  }\r\n\r\n  createNetwork() {\r\n    let info = this.props.info\r\n    const network = (\r\n      <>\r\n      {this.createLoadindBar()}\r\n      <Network ref={this.state.netRef} onClick={(params: any) => {this.handleClick(params)}} >\r\n        {info.data.nodes.map(n => createNode(n, info.categories))}\r\n        {info.data.edges.map((e) => createEdge(e))}\r\n      </Network>\r\n      </>\r\n    )\r\n    return network\r\n  }\r\n\r\n  createLoadindBar() {\r\n    return (\r\n      <div id=\"progressBar\">\r\n        <CircularProgress variant=\"determinate\" value={this.state.loadingRatio * 100}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  registerLoading() {\r\n    // https://jsfiddle.net/api/post/library/pure/\r\n    const self = this\r\n    const ref = (this.state.netRef.current as NetworkRef).network\r\n    ref.on(\"stabilizationProgress\", function (params: any) {\r\n      const ratio = params.iterations / params.total;\r\n      self.setState({loadingRatio: ratio})\r\n    })\r\n    ref.once(\"stabilizationIterationsDone\", function () {\r\n      self.setState({loadingRatio: 1})\r\n    })\r\n  }\r\n\r\n  captureImg() {\r\n    const canvas = getCanvas()\r\n    // Fill the canvas background, see: \r\n    //   https://stackoverflow.com/questions/50104437/set-background-color-to-save-canvas-chart\r\n    const context = canvas.getContext('2d')\r\n    if (context !== null) {\r\n      context.save()\r\n      context.globalCompositeOperation = 'destination-over'\r\n      context.fillStyle = \"#ffffff\"\r\n      context.fillRect(0, 0, canvas.width, canvas.height)\r\n      context.restore()\r\n    }\r\n\r\n    const img = canvas.toDataURL(\"image/png\", 1.0)\r\n    const url = img.replace(/^data:image\\/[^;]/, 'data:application/octet-stream')\r\n    let a = document.createElement('a');\r\n    a.download = \"network.png\";\r\n    a.href = url\r\n    a.target = '_blank';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  }\r\n\r\n  queryNodes(q:string, reverse:boolean = false) {\r\n    let query_type = \"label\"\r\n    let query_text = \"\"\r\n    const items = q.split(\":\")\r\n    if (items.length === 1) {\r\n      query_text = items[0]\r\n    } else if (items.length === 2) {\r\n      query_type = items[0]\r\n      query_text = items[1].trim()\r\n    } else {\r\n      return []\r\n    }\r\n    let res = []\r\n    const nodes = this.props.info.data.nodes\r\n    const toggle = (cond: boolean) => reverse ? (!cond) : cond\r\n    try {\r\n      const pattern = new RegExp(query_text)\r\n      for (let n of nodes) {\r\n        if (!(query_type in n)) {continue}\r\n        const val = (n as any)[query_type]\r\n        if (query_type === \"id\") {\r\n          if (toggle(val === parseInt(query_text))) {\r\n            res.push(n)\r\n          }\r\n        } else {\r\n          if (toggle(pattern.test(String(val)))) {\r\n            res.push(n)\r\n          }\r\n        }\r\n      }\r\n      return res\r\n    } catch(e) {\r\n      console.log(e)\r\n      return []\r\n    }\r\n  }\r\n\r\n  queryNodesAndFocus(q:string) {\r\n    const nodes = this.queryNodes(q)\r\n    if (nodes.length <= 0) {return}\r\n    const network = (this.state.netRef.current as NetworkRef).network\r\n    network.selectNodes([])\r\n    const nodes_id = nodes.map(n => String(n.id))\r\n    if (nodes.length > 1) {\r\n      network.fit({nodes: nodes_id, animation: true})\r\n    } else {\r\n      network.focus(nodes_id[0], {scale: 1, animation: true})\r\n    }\r\n    network.selectNodes(nodes_id)\r\n  }\r\n\r\n  queryNodesAndFilter(q:string, reverse:boolean) {\r\n    const nodes = this.queryNodes(q, reverse)\r\n    this.props.setNodes(nodes)\r\n  }\r\n\r\n  resetNodes() {\r\n    this.props.setNodes(this.state.oldNodes)\r\n  }\r\n\r\n  getSelectedClosure() {\r\n    const network = (this.state.netRef.current as NetworkRef).network\r\n    const selected = network.getSelectedNodes()\r\n    let closure: Set<IdType> = new Set();\r\n    for (const nid of selected) {\r\n      closure.add( parseInt(String(nid)) )\r\n      const connected = network.getConnectedNodes(nid)\r\n      for (const nid2 of (connected as IdType[])) {\r\n        closure.add( parseInt(String(nid2)) )\r\n      }\r\n    }\r\n    return closure\r\n  }\r\n\r\n  hiddenNonSelected() {\r\n    this.resetNodes()\r\n    const closure = this.getSelectedClosure()\r\n    let nodes = []\r\n    for (const n of this.state.oldNodes) {\r\n      if (closure.has(n.id)) {\r\n        nodes.push(n)\r\n      }\r\n    }\r\n    this.props.setNodes(nodes)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"netView\">\r\n        <div className=\"canvas-wrap\" id=\"full-screen-region\">\r\n          {this.createNetwork()}\r\n          {this.state.infoBoard}\r\n          <ViewControl\r\n            setOpt={this.setNetOptions.bind(this)}\r\n            getOpt={this.getNetOptions.bind(this)}\r\n            captureImg={this.captureImg.bind(this)}\r\n            queryAndFocus={this.queryNodesAndFocus.bind(this)}\r\n            queryAndFilter={this.queryNodesAndFilter.bind(this)}\r\n            reset={this.resetNodes.bind(this)}\r\n            inforBoardSwitch={this.state.inforBoardSwitch}\r\n            setInforBoardSwitch={this.setInforBoardSwitch.bind(this)}\r\n            hiddenUnselectedSwitch={this.state.hiddenUnselectedSwitch}\r\n            setHiddenUnselectedSwitch={this.setHiddenUnselectedSwitch.bind(this)}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","/**\r\n * Modified from this:\r\n *   https://material-ui.com/zh/components/slider/#custom-marks\r\n */\r\nimport React from 'react';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nimport { TimePoint } from './datatypes';\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 400,\r\n    },\r\n    margin: {\r\n      height: theme.spacing(3),\r\n    },\r\n  }),\r\n);\r\n\r\ntype TimeSliderProps = {\r\n    time: number,\r\n    timePoints: Array<TimePoint>,\r\n    setTime: (t: number) => void,\r\n}\r\n\r\nexport default (props: TimeSliderProps) => {\r\n  if (props.timePoints.length < 2) { return (<></>) }\r\n  const classes = useStyles();\r\n\r\n  let i = -1;\r\n  const marks = props.timePoints.map(t => {\r\n    i += 1\r\n    return {\r\n      value: i,\r\n      label: t.label\r\n    }\r\n  })\r\n\r\n  const handleChange = (event: any, newValue: number | number[]) => {\r\n    const t = newValue as number\r\n    props.setTime(t)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root+\" timeSlider\"}>\r\n        <div className=\"label\">时间轴</div>\r\n        <div className=\"slider\">\r\n          <Slider\r\n            defaultValue={props.time}\r\n            aria-labelledby=\"discrete-slider-custom\"\r\n            min={0}\r\n            max={props.timePoints.length-1}\r\n            step={null}\r\n            valueLabelDisplay=\"off\"\r\n            marks={marks}\r\n            onChange={handleChange}\r\n          />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// Implement the Table style editor of nodes, edges and categories\r\n//\r\n// This file is copy then modified from devexetreme-reactive demo:\r\n//   https://devexpress.github.io/devextreme-reactive/react/grid/demos/featured/data-editing/\r\n\r\nimport React from 'react';\r\nimport {\r\n  SortingState, EditingState, PagingState, SummaryState,\r\n  IntegratedPaging, IntegratedSorting,\r\n} from '@devexpress/dx-react-grid';\r\nimport {\r\n  Grid,\r\n  Table, TableHeaderRow, TableEditRow, TableEditColumn,\r\n  PagingPanel, TableColumnReordering,\r\n  TableFixedColumns, \r\n} from '@devexpress/dx-react-grid-material-ui';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Input from '@material-ui/core/Input';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TableCell from '@material-ui/core/TableCell';\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst styles = theme => ({\r\n  lookupEditCell: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  dialog: {\r\n    width: 'calc(100% - 16px)',\r\n  },\r\n  inputRoot: {\r\n    width: '100%',\r\n  },\r\n  selectMenu: {\r\n    position: 'absolute !important',\r\n  },\r\n});\r\n\r\nconst AddButton = ({ onExecute }) => (\r\n  <div style={{ textAlign: 'center' }}>\r\n    <Button\r\n      color=\"primary\"\r\n      onClick={onExecute}\r\n      title=\"Create new row\"\r\n    >\r\n      New\r\n    </Button>\r\n  </div>\r\n);\r\n\r\nconst EditButton = ({ onExecute }) => (\r\n  <IconButton onClick={onExecute} title=\"Edit row\">\r\n    <EditIcon />\r\n  </IconButton>\r\n);\r\n\r\nconst DeleteButton = ({ onExecute }) => (\r\n  <IconButton\r\n    onClick={() => {\r\n      // eslint-disable-next-line\r\n      if (window.confirm('Are you sure you want to delete this row?')) {\r\n        onExecute();\r\n      }\r\n    }}\r\n    title=\"Delete row\"\r\n  >\r\n    <DeleteIcon />\r\n  </IconButton>\r\n);\r\n\r\nconst CommitButton = ({ onExecute }) => (\r\n  <IconButton onClick={onExecute} title=\"Save changes\">\r\n    <SaveIcon />\r\n  </IconButton>\r\n);\r\n\r\nconst CancelButton = ({ onExecute }) => (\r\n  <IconButton color=\"secondary\" onClick={onExecute} title=\"Cancel changes\">\r\n    <CancelIcon />\r\n  </IconButton>\r\n);\r\n\r\nconst commandComponents = {\r\n  add: AddButton,\r\n  edit: EditButton,\r\n  delete: DeleteButton,\r\n  commit: CommitButton,\r\n  cancel: CancelButton,\r\n};\r\n\r\nconst Command = ({ id, onExecute }) => {\r\n  const CommandButton = commandComponents[id];\r\n  return (\r\n    <CommandButton\r\n      onExecute={onExecute}\r\n    />\r\n  );\r\n};\r\n\r\nconst availableValues = {\r\n  categorie: [\"person\", \"organization\"],\r\n  direction: [\"true\", \"false\"]\r\n};\r\n\r\nconst LookupEditCellBase = ({\r\n  availableColumnValues, value, onValueChange, classes,\r\n}) => (\r\n  <TableCell\r\n    className={classes.lookupEditCell}\r\n  >\r\n    <Select\r\n      value={value}\r\n      onChange={event => onValueChange(event.target.value)}\r\n      MenuProps={{\r\n        className: classes.selectMenu,\r\n      }}\r\n      input={(\r\n        <Input\r\n          classes={{ root: classes.inputRoot }}\r\n        />\r\n      )}\r\n    >\r\n      {availableColumnValues.map(item => (\r\n        <MenuItem key={item} value={item}>\r\n          {item}\r\n        </MenuItem>\r\n      ))}\r\n    </Select>\r\n  </TableCell>\r\n);\r\nexport const LookupEditCell = withStyles(styles, { name: 'ControlledModeDemo' })(LookupEditCellBase);\r\n\r\nconst EditCell = (props) => {\r\n  const { column } = props;\r\n  const availableColumnValues = availableValues[column.name];\r\n  if (availableColumnValues) {\r\n    return <LookupEditCell {...props} availableColumnValues={availableColumnValues} />;\r\n  }\r\n  return <TableEditRow.Cell {...props} />;\r\n};\r\n\r\nconst getRowId = row => row.id;\r\n\r\n/**\r\n * Generate an Editable Grid object\r\n */\r\nconst createGrid = (colDef, getParentState, widthDef, colOrder, defaultDef, setParentState) => {\r\n\r\n  class TheGrid extends React.Component {\r\n    \r\n    constructor(props) {\r\n      super(props)\r\n      this.state = {\r\n        columns: colDef,\r\n        rows: (typeof getParentState === \"function\") ? getParentState(props) : props[getParentState],\r\n        tableColumnExtensions: widthDef,\r\n        sorting: [],\r\n        editingRowIds: [],\r\n        addedRows: [],\r\n        rowChanges: {},\r\n        currentPage: 0,\r\n        pageSize: 5,\r\n        pageSizes: [5, 10, 0],\r\n        columnOrder: colOrder,\r\n        leftFixedColumns: [TableEditColumn.COLUMN_TYPE],\r\n        totalSummaryItems: []\r\n      }\r\n    }\r\n\r\n    changeAddedRows(value) {\r\n      let defaultRow = {}\r\n      for (const [k, v] of Object.entries(defaultDef)) {\r\n        if (typeof v === \"function\") {\r\n          defaultRow[k] = v(this.state.rows)\r\n        } else {\r\n          defaultRow[k] = v\r\n        }\r\n      }\r\n      console.log(defaultRow)\r\n      this.setState({\r\n        addedRows: value.map(row => (Object.keys(row).length ? row : defaultRow))\r\n      })\r\n    }\r\n\r\n    deleteRows(deletedIds) {\r\n      const rowsForDelete = this.state.rows.slice();\r\n      deletedIds.forEach((rowId) => {\r\n        const index = rowsForDelete.findIndex(row => row.id === rowId);\r\n        if (index > -1) {\r\n          rowsForDelete.splice(index, 1);\r\n        }\r\n      });\r\n      return rowsForDelete;\r\n    }\r\n\r\n    commitChanges({ added, changed, deleted }) {\r\n      const rows = this.state.rows\r\n      let changedRows;\r\n      if (added) {\r\n        const startingAddedId = rows.length > 0 ? rows[rows.length - 1].id + 1 : 0;\r\n        changedRows = [\r\n          ...rows,\r\n          ...added.map((row, index) => ({\r\n            id: startingAddedId + index,\r\n            ...row,\r\n          })),\r\n        ];\r\n      }\r\n      if (changed) {\r\n        changedRows = rows.map(row => (changed[row.id] ? { ...row, ...changed[row.id] } : row));\r\n      }\r\n      if (deleted) {\r\n        changedRows = this.deleteRows(deleted);\r\n      }\r\n      this.setState({\r\n        rows: changedRows\r\n      })\r\n      // change the state of parent component\r\n      setParentState(this.props, changedRows)\r\n    };\r\n\r\n  /**\r\n   * re-render rows when receive new props, see:\r\n   *   https://stackoverflow.com/questions/41233458/react-child-component-not-updating-after-parent-state-change\r\n   */\r\n  componentWillReceiveProps(nextProps) {\r\n    const newRows = (typeof getParentState === \"function\") ? getParentState(nextProps) : nextProps[getParentState]\r\n    this.setState({ rows: newRows });  \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Paper>\r\n        <Grid\r\n          rows={this.state.rows}\r\n          columns={this.state.columns}\r\n          getRowId={getRowId}\r\n        >\r\n          <SortingState\r\n            sorting={this.state.sorting}\r\n            onSortingChange={(s) => {this.setState({sorting: s})}}\r\n          />\r\n          <PagingState\r\n            currentPage={this.state.currentPage}\r\n            onCurrentPageChange={(c) => this.setState({currentPage: c})}\r\n            pageSize={this.state.pageSize}\r\n            onPageSizeChange={(s) => this.setState({pageSize: s})}\r\n          />\r\n          <EditingState\r\n            editingRowIds={this.state.editingRowIds}\r\n            onEditingRowIdsChange={(ids) => {this.setState({editingRowIds: ids})}}\r\n            rowChanges={this.state.rowChanges}\r\n            onRowChangesChange={(c) => {this.setState({rowChanges: c})}}\r\n            addedRows={this.state.addedRows}\r\n            onAddedRowsChange={this.changeAddedRows.bind(this)}\r\n            onCommitChanges={this.commitChanges.bind(this)}\r\n          />\r\n          <SummaryState\r\n            totalItems={this.state.totalSummaryItems}\r\n          />\r\n\r\n          <IntegratedSorting />\r\n          <IntegratedPaging />\r\n\r\n          <Table\r\n            columnExtensions={this.state.tableColumnExtensions}\r\n          />\r\n          <TableColumnReordering\r\n            order={this.state.columnOrder}\r\n            onOrderChange={(c) => this.setState({columnOrder: c})}\r\n          />\r\n          <TableHeaderRow showSortingControls />\r\n          <TableEditRow\r\n            cellComponent={EditCell}\r\n          />\r\n          <TableEditColumn\r\n            width={150}\r\n            showAddCommand={!this.state.addedRows.length}\r\n            showEditCommand\r\n            showDeleteCommand\r\n            commandComponent={Command}\r\n          />\r\n          <TableFixedColumns\r\n            leftColumns={this.state.leftFixedColumns}\r\n          />\r\n          <PagingPanel\r\n            pageSizes={this.state.pageSizes}\r\n          />\r\n        </Grid>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  }\r\n\r\n  return TheGrid\r\n\r\n}\r\n\r\nconst NodeGrid = createGrid(\r\n  [\r\n    { name: 'id', title: 'ID' },\r\n    { name: 'label', title: '标签' },\r\n    { name: 'categorie', title: '类别' },\r\n    { name: 'info', title: '信息' },\r\n    { name: 'image', title: '图片' },\r\n    { name: 'link', title: '链接' },\r\n  ],\r\n  \"nodes\",\r\n  [\r\n    { columnName: 'id', width: 80 },\r\n    { columnName: 'label', width: 100 },\r\n    { columnName: 'categorie', width: 100},\r\n    { columnName: 'info', width: 300 },\r\n    { columnName: 'image', width: 200 },\r\n    { columnName: 'link', width: 200 },\r\n  ],\r\n  ['id', 'label', 'categorie', 'info', 'image', 'link'],\r\n  {\r\n    id: (rows) => (rows.length > 0) ? Math.max(...rows.map((r) => r.id)) + 1 : 0,\r\n    label: \"\",\r\n    categorie: availableValues.categorie[0],\r\n    info: \"\",\r\n    image: \"\",\r\n    link: \"\"\r\n  },\r\n  (props, changedRows) => {props.setNodes(changedRows.map((r) => {return {...r, id: parseInt(String(r.id))}}))}\r\n)\r\n\r\nconst reprEdges = (edges) => edges.map((e_) => {\r\n  let e = Object.assign({}, e_)\r\n  e.direction = String(e.direction)\r\n  return e\r\n})\r\n\r\nconst recoverEdges = (rows) => rows.map((e_) => {\r\n  let e = Object.assign({}, e_)\r\n  e.id = parseInt(String(e.id))\r\n  e.direction = (e.direction === \"false\") ? false : true\r\n  return e\r\n})\r\n\r\nconst EdgeGrid = createGrid(\r\n  [\r\n    { name: 'id', title: 'ID' },\r\n    { name: 'from', title: 'from' },\r\n    { name: 'to', title: 'to' },\r\n    { name: 'label', title: '标签' },\r\n    { name: 'direction', title: '有向？' }\r\n  ],\r\n  (props) => reprEdges(props.edges),\r\n  [\r\n    { columnName: 'id', width: 100 },\r\n    { columnName: 'from', width: 100 },\r\n    { columnName: 'to', width: 100},\r\n    { columnName: 'label', width: 120 },\r\n    { columnName: 'direction', width: 100 },\r\n  ],\r\n  ['id', 'from', 'to', 'label', 'direction'],\r\n  {\r\n    id: (rows) => (rows.length > 0) ? Math.max(...rows.map((r) => r.id)) + 1 : 0,\r\n    label: \"\",\r\n    direction: availableValues.direction[0],\r\n    info: \"\",\r\n    image: \"\",\r\n    link: \"\"\r\n  },\r\n  (props, changedRows) => {props.setEdges(recoverEdges(changedRows))}\r\n)\r\n\r\nconst reprCats = (cats) => {\r\n  let rows = []\r\n  for (const [k, v] of Object.entries(cats)) {\r\n    let row = Object.assign({id: k}, v)\r\n    rows.push(row)\r\n  }\r\n  return rows\r\n}\r\n\r\nconst recoverCats = (rows) => {\r\n  let cats = {}\r\n  for (const r of rows) {\r\n    let v = Object.assign({}, r)\r\n    delete v.id\r\n    cats[r.id] = v\r\n  }\r\n  return cats\r\n}\r\n\r\nconst CatGrid = createGrid(\r\n  [\r\n    { name: 'id', title: 'ID' },\r\n    { name: 'label', title: '标签' },\r\n    { name: 'color', title: '颜色' }\r\n  ],\r\n  (props) => {\r\n    const cats = props.cats\r\n    availableValues.categorie = Object.keys(cats)\r\n    return reprCats(cats)\r\n  },\r\n  [\r\n    { columnName: 'id', width: 200 },\r\n    { columnName: 'label', width: 200 },\r\n    { columnName: 'color', width: 200},\r\n  ],\r\n  ['id', 'label', 'color'],\r\n  {\r\n    id: \"\",\r\n    label: \"\",\r\n    color: \"#aaaaaa\"\r\n  },\r\n  (props, changedRows) => {\r\n    availableValues.categorie = changedRows.map((r) => r.id)\r\n    props.setCats(recoverCats(changedRows))\r\n  }\r\n)\r\n\r\nexport { NodeGrid, EdgeGrid, CatGrid }\r\n","import React, {Component} from \"react\";\r\nimport Accordion from '@material-ui/core/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\n\r\ntype CommentsProps = {\r\n  issueTerm: string,\r\n}\r\n\r\n/**\r\n * Reference:\r\n *   + https://github.com/utterance/utterances/issues/161\r\n *   + https://material-ui.com/zh/components/accordion/\r\n */\r\nexport default class Comments extends Component<CommentsProps, {}> {\r\n\r\n  componentDidMount () {\r\n      let script = document.createElement(\"script\");\r\n      let anchor = document.getElementById(\"inject-comments-for-uterances\");\r\n      if (anchor !== null) {\r\n        script.setAttribute(\"src\", \"https://utteranc.es/client.js\");\r\n        script.setAttribute(\"crossorigin\", \"anonymous\");\r\n        script.setAttribute(\"async\", \"true\");\r\n        script.setAttribute(\"repo\", \"AniNet-Project/aninet-project.github.io\");\r\n        script.setAttribute(\"issue-term\", this.props.issueTerm);\r\n        script.setAttribute( \"theme\", \"github-light\");\r\n        anchor.appendChild(script);\r\n      }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <>\r\n          <div className=\"comments\">\r\n\r\n          <Accordion>\r\n            <AccordionSummary\r\n              expandIcon={<ExpandMoreIcon />}\r\n              aria-controls=\"panel1a-content\"\r\n            >\r\n              <Typography>评论区</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails id=\"comments-content\">\r\n              <div id=\"inject-comments-for-uterances\"></div>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n\r\n          </div>\r\n        </>\r\n    );\r\n  }\r\n}\r\n","import React from 'react'\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs'\r\nimport 'react-tabs/style/react-tabs.css'\r\n\r\nimport './NetPage.css'\r\nimport Header from './Header'\r\nimport Footer from './Footer'\r\nimport ToolBar from './ToolBar'\r\nimport NetView from './NetView'\r\nimport TimeSlider from './TimeSlider'\r\nimport {NetItem, TimePoint, ItemInfo, NodeType, EdgeType, CatType} from './datatypes'\r\nimport { NodeGrid, EdgeGrid, CatGrid } from './EditGrid'\r\nimport Comments from './Comments'\r\n\r\n\r\n\r\nconst preProcessInfo = (info: ItemInfo) => {\r\n  let new_nodes: Array<NodeType> = []\r\n  for (let n of info.data.nodes) {\r\n    n.id = parseInt(String(n.id))\r\n    new_nodes.push(n)\r\n  }\r\n  info.data.nodes = new_nodes\r\n  return info\r\n}\r\n\r\n\r\ntype NetPageProps = {\r\n  item: NetItem\r\n}\r\n\r\ntype NetPageState = {\r\n  error: null | Error,\r\n  isLoaded: boolean,\r\n  timesInfo: Array<ItemInfo>,\r\n  currentTime: number,\r\n  timePoints: Array<TimePoint>,\r\n}\r\n\r\n\r\nclass NetPage extends React.Component<NetPageProps, NetPageState> {\r\n  constructor(props: NetPageProps) {\r\n    super(props)\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      timesInfo: [],\r\n      currentTime: 0,\r\n      timePoints: [],\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    let item = this.props.item\r\n    let timepoints: Array<TimePoint> = []\r\n    if (typeof item.url === \"string\") {\r\n      timepoints.push({label: \"common\", url: item.url})\r\n    } else {\r\n      timepoints = item.url\r\n    }\r\n    this.setState({timesInfo: new Array(timepoints.length)})\r\n    Promise.all(\r\n      timepoints.map((t) => fetch(t.url).then(resp => resp.json()))\r\n    )\r\n    .then( infos => {\r\n      this.setState({\r\n        isLoaded: true,\r\n        timesInfo: infos.map(info => preProcessInfo(info)),\r\n        timePoints: timepoints,\r\n      })\r\n    },\r\n    (error) => {\r\n      this.setState({\r\n        isLoaded: true,\r\n        error\r\n      })\r\n    })\r\n  }\r\n\r\n  setNodes(nodes: Array<NodeType>) {\r\n    let times = this.state.timesInfo\r\n    let info = times[this.state.currentTime]\r\n    if (info !== null) {\r\n      info.data.nodes = nodes\r\n      this.setState({timesInfo: times})\r\n    }\r\n  }\r\n\r\n  setEdges(edges: Array<EdgeType>) {\r\n    let times = this.state.timesInfo\r\n    let info = times[this.state.currentTime]\r\n    if (info !== null) {\r\n      info.data.edges = edges\r\n      this.setState({timesInfo: times})\r\n    }\r\n  }\r\n\r\n  setCategories(categories: Record<string, CatType>) {\r\n    let times = this.state.timesInfo\r\n    let info = times[this.state.currentTime]\r\n    if (info != null) {\r\n      info.categories = categories\r\n      this.setState({timesInfo: times})\r\n    }\r\n  }\r\n\r\n  setInfo(info: ItemInfo) {\r\n    let times = this.state.timesInfo\r\n    times[this.state.currentTime] = info\r\n    this.setState({timesInfo: times})\r\n  }\r\n\r\n  setCurrentTime(t: number) {\r\n    this.setState({currentTime: t})\r\n  }\r\n\r\n  render() {\r\n    let item = this.props.item\r\n    const { error, isLoaded, timesInfo, currentTime } = this.state\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>\r\n    } else if (!isLoaded) {\r\n      return <div>Loading...</div>\r\n    } else {\r\n      const info = timesInfo[currentTime]\r\n      return (\r\n        <div>\r\n          <Header title={item.name}/>\r\n          <div className=\"container\">\r\n          <ToolBar info={info} setInfo={this.setInfo.bind(this)}/>\r\n          <div className=\"tabs\">\r\n            <Tabs>\r\n              <TabList>\r\n                <Tab>网络视图</Tab>\r\n                <Tab>节点(Nodes)</Tab>\r\n                <Tab>边(Edges)</Tab>\r\n                <Tab>节点类别</Tab>\r\n              </TabList>\r\n              <TabPanel forceRender={true}>\r\n                <NetView info={info} setNodes={this.setNodes.bind(this)} />\r\n              </TabPanel>\r\n              <TabPanel forceRender={true}>\r\n                <NodeGrid nodes={info.data.nodes} setNodes={this.setNodes.bind(this)}/>\r\n              </TabPanel>\r\n              <TabPanel forceRender={true}>\r\n                <EdgeGrid edges={info.data.edges} setEdges={this.setEdges.bind(this)}/>\r\n              </TabPanel>\r\n              <TabPanel forceRender={true}>\r\n                <CatGrid cats={info.categories} setCats={this.setCategories.bind(this)}/>\r\n              </TabPanel>\r\n            </Tabs>\r\n          </div>\r\n\r\n          <TimeSlider\r\n            time={this.state.currentTime}\r\n            timePoints={this.state.timePoints}\r\n            setTime={this.setCurrentTime.bind(this)}\r\n          />\r\n\r\n          <Comments issueTerm={item.name}/>\r\n\r\n          </div>\r\n          <Footer/>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default NetPage\r\n","/**\r\n * Come from here:\r\n *   https://medium.com/young-developer/react-markdown-code-and-syntax-highlighting-632d2f9b4ada\r\n */\r\n\r\nimport React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\n\r\ntype CodeBlockProps = {\r\n    language: string,\r\n    value: string,\r\n}\r\n\r\nclass CodeBlock extends PureComponent<CodeBlockProps, {}> {\r\n  static propTypes = {\r\n    value: PropTypes.string.isRequired,\r\n    language: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    language: null\r\n  };\r\n\r\n  render() {\r\n    const { language, value } = this.props;\r\n    return (\r\n      <SyntaxHighlighter language={language}>\r\n        {value}\r\n      </SyntaxHighlighter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CodeBlock;\r\n","import React from 'react'\r\nimport ReactMarkdown from 'react-markdown'\r\n\r\nimport CodeBlock from \"./CodeBlock\"\r\nimport Header from './Header'\r\nimport Footer from './Footer'\r\nimport './DocPage.css'\r\n\r\n\r\ntype DocPageProps = {\r\n  title: string,\r\n  sourceUrl: string,\r\n}\r\ntype DocPageState = {\r\n  error: null | Error,\r\n  isLoaded: boolean,\r\n  content: string | null,\r\n}\r\n\r\n\r\nexport default class DocPage extends React.Component<DocPageProps, DocPageState> {\r\n  constructor(props: DocPageProps) {\r\n    super(props)\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      content: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const url = this.props.sourceUrl\r\n    fetch(url)\r\n      .then(res => res.text())\r\n      .then((data) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          content: data\r\n        })\r\n      },\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { error, isLoaded, content } = this.state\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>\r\n    } else if (!isLoaded) {\r\n      return <div>Loading...</div>\r\n    } else {\r\n      return (\r\n        <>\r\n          <Header title={this.props.title}/>\r\n          <div className=\"container\">\r\n            <div className=\"doc\">\r\n              <ReactMarkdown\r\n                source={content as string}\r\n                renderers={{ code: CodeBlock }}\r\n                escapeHtml={false}\r\n              />\r\n            </div>\r\n          </div>\r\n          <Footer/>\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n}\r\n","import React from 'react';\r\nimport {\r\n  HashRouter as Router,\r\n  Route\r\n} from 'react-router-dom'\r\nimport './App.css';\r\nimport NetPage from './NetPage'\r\nimport Header from './Header'\r\nimport Footer from './Footer'\r\nimport { NetItem } from './datatypes';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DocPage from './DocPage';\r\n\r\ntype CardProps = {\r\n  item: NetItem\r\n}\r\n\r\nclass Card extends React.Component<CardProps, object> {\r\n  render() {\r\n    let item = this.props.item\r\n    return (\r\n      <a href={\"#/network/\"+item.name}>\r\n      <div className=\"card\">\r\n        <img className=\"titleImg\" src={item.titleImg} alt={item.name}></img>\r\n        <p className=\"name\">{item.name}</p>\r\n      </div>\r\n      </a>\r\n    )\r\n  }\r\n}\r\n\r\nclass NewCard extends React.Component<CardProps, object> {\r\n  render() {\r\n    let item = this.props.item\r\n    return (\r\n        <div className=\"card\" id=\"newCard\">\r\n          <a href={\"#/network/\"+item.name}>\r\n            <Tooltip title=\"新建空白页\" placement=\"top\">\r\n              <IconButton type=\"submit\" id=\"newPageButton\" >\r\n                <AddCircleOutlineIcon id=\"newPageIcon\"/>\r\n              </IconButton>\r\n            </Tooltip>\r\n          </a>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype CardsProps = {\r\n  items: Array<NetItem>\r\n}\r\n\r\nclass Cards extends React.Component<CardsProps, object> {\r\n  render() {\r\n    const items = this.props.items\r\n    return (\r\n      <div className=\"cards\">\r\n        {items.map(item => (\r\n          (item.name === \"新建网络\")\r\n          ? <NewCard key={item.name} item={item}/>\r\n          : <Card key={item.name} item={item}/>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype HomeProps = {\r\n  items: Array<NetItem>\r\n}\r\n\r\nclass Home extends React.Component<HomeProps, object> {\r\n  render() {\r\n    let items = this.props.items\r\n    return (\r\n      <div className=\"App\">\r\n        <Header title=\"ACG人物关系可视化\"/>\r\n        <div className=\"contents\">\r\n          <div className=\"container\">\r\n            <Cards items={items}/>\r\n          </div>\r\n        </div>\r\n        <Footer/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\ntype AppProps = {}\r\ntype AppState = {\r\n  error: Error | null,\r\n  isLoaded: boolean,\r\n  items: Array<NetItem>\r\n}\r\n\r\nclass App extends React.Component<AppProps, AppState> {\r\n  constructor(props: AppProps) {\r\n    super(props)\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      items: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(\"networks.json\")\r\n      .then(res => res.json())\r\n      .then((data) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          items: data\r\n        })\r\n      },\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n    let { error, isLoaded, items } = this.state\r\n    const emptyItem = {name: \"新建网络\", titleImg: \"\", url: \"data/empty.json\"}\r\n    items = items.concat([emptyItem])\r\n    if (error) {\r\n      return <div>Error: {error.message}</div>\r\n    } else if (!isLoaded) {\r\n      return <div>Loading...</div>\r\n    } else {\r\n      return (\r\n        <Router basename=\"/\">\r\n          <Route key=\"home\" exact path=\"/\" component={() => <Home items={items}/>} />\r\n          {items.map(item => (\r\n            <Route key={item.name} path={\"/network/\"+item.name}\r\n                   component={() => <NetPage item={item}/>} />\r\n          ))}\r\n          <Route key=\"contribute\" path={\"/contribute\"}\r\n                 component={() => <DocPage title=\"如何贡献\" sourceUrl={\"docs/contribute.md\"}/>} />\r\n          <Route key=\"about\" path={\"/about\"}\r\n                 component={() => <DocPage title=\"关于\" sourceUrl={\"docs/about.md\"}/>}\r\n                 />\r\n        </Router>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}